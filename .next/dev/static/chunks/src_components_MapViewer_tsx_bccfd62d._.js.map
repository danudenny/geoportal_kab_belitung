{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/danudenny/Downloads/geogreen-mapper/src/components/MapViewer.tsx"],"sourcesContent":["import Feature from 'ol/Feature';\nimport Map from 'ol/Map';\nimport View from 'ol/View';\nimport { defaults as defaultControls } from 'ol/control';\nimport { click } from 'ol/events/condition';\nimport GeoJSON from 'ol/format/GeoJSON';\nimport { LineString, Point, Polygon } from 'ol/geom';\nimport Select from 'ol/interaction/Select';\nimport { Tile as TileLayer, Vector as VectorLayer } from 'ol/layer';\nimport { fromLonLat } from 'ol/proj';\nimport { OSM, Vector as VectorSource, XYZ } from 'ol/source';\nimport { Circle as CircleStyle, Fill, Icon, Stroke, Style } from 'ol/style';\nimport { useEffect, useRef, useState } from 'react';\n\nimport { Compass, Crosshair, Loader2, Locate, Minus, Plus } from 'lucide-react';\nimport { LayerGroup, SelectedFeature } from '../types';\n\ninterface MapViewerProps {\n    layerGroups: LayerGroup[];\n    onFeatureSelect: (feature: SelectedFeature | null) => void;\n    filesToLoad: FileList | null;\n}\n\nconst MapViewer: React.FC<MapViewerProps> = ({\n    layerGroups,\n    onFeatureSelect,\n    filesToLoad,\n}) => {\n    const mapElement = useRef<HTMLDivElement>(null);\n    const mapRef = useRef<Map | null>(null);\n    const layerRefs = useRef<Record<string, TileLayer<any> | VectorLayer<any>>>(\n        {}\n    );\n    const userLocationLayerRef = useRef<VectorLayer<VectorSource> | null>(null);\n\n    // Track loaded files to prevent duplicate processing if re-rendered\n    const [processedFiles, setProcessedFiles] = useState<Set<string>>(\n        new Set()\n    );\n    const [isLocating, setIsLocating] = useState(false);\n\n    // Initialize Map\n    useEffect(() => {\n        if (!mapElement.current) return;\n\n        // Center on Belitung\n        const initialView = new View({\n            center: fromLonLat([107.63, -2.85]),\n            zoom: 11,\n        });\n\n        const map = new Map({\n            target: mapElement.current,\n            layers: [], // Layers will be managed by the secondary effect\n            view: initialView,\n            controls: defaultControls({\n                zoom: false,\n                rotate: false,\n                attribution: false,\n            }), // Custom controls\n        });\n\n        // Interaction for Selection\n        const selectClick = new Select({\n            condition: click,\n            style: (feature) => {\n                const geometryType = feature.getGeometry()?.getType();\n\n                // Dynamic selection style based on geometry\n                if (geometryType === 'Point') {\n                    return new Style({\n                        image: new CircleStyle({\n                            radius: 10,\n                            fill: new Fill({ color: '#10b981' }),\n                            stroke: new Stroke({ color: '#fff', width: 3 }),\n                        }),\n                    });\n                }\n\n                return new Style({\n                    fill: new Fill({ color: 'rgba(16, 185, 129, 0.4)' }),\n                    stroke: new Stroke({ color: '#10b981', width: 4 }),\n                });\n            },\n        });\n\n        map.addInteraction(selectClick);\n\n        selectClick.on('select', (e) => {\n            if (e.selected.length > 0) {\n                const feature = e.selected[0];\n                const props = feature.getProperties();\n\n                // Don't select the user location marker generically\n                if (props.isUserLocation) {\n                    selectClick.getFeatures().clear();\n                    return;\n                }\n\n                const { geometry, ...cleanProps } = props;\n\n                onFeatureSelect({\n                    id:\n                        feature.getId() ||\n                        Math.random().toString(36).substr(2, 9),\n                    properties: cleanProps,\n                    layerId: 'unknown',\n                    geometryType: feature.getGeometry()?.getType() || 'Unknown',\n                });\n            } else {\n                onFeatureSelect(null);\n            }\n        });\n\n        mapRef.current = map;\n\n        // Create User Location Layer\n        const userSource = new VectorSource();\n        const userLayer = new VectorLayer({\n            source: userSource,\n            zIndex: 999, // Always on top\n        });\n        map.addLayer(userLayer);\n        userLocationLayerRef.current = userLayer;\n\n        return () => {\n            map.setTarget(undefined);\n        };\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []); // Run once\n\n    // Manage Layers Sync\n    useEffect(() => {\n        const map = mapRef.current;\n        if (!map) return;\n\n        // Flatten group structure to simple list for processing\n        layerGroups.forEach((group: LayerGroup) => {\n            group.layers.forEach(\n                (layerConfig: import('../types').LayerConfig) => {\n                    let layer = layerRefs.current[layerConfig.id];\n\n                    // Create layer if it doesn't exist\n                    if (!layer) {\n                        if (layerConfig.type === 'tile') {\n                            // Determine source based on config\n                            let source;\n                            if (\n                                layerConfig.source &&\n                                layerConfig.source.startsWith('http')\n                            ) {\n                                console.log(\n                                    `Creating XYZ source for ${layerConfig.name}: ${layerConfig.source}`\n                                );\n                                source = new XYZ({\n                                    url: layerConfig.source,\n                                    maxZoom: 20,\n                                    crossOrigin: 'anonymous', // Important for canvas operations\n                                });\n                            } else {\n                                console.log(\n                                    `Using default OSM source for ${layerConfig.name}`\n                                );\n                                source = new OSM();\n                            }\n\n                            layer = new TileLayer({\n                                source: source,\n                                visible: layerConfig.visible,\n                                opacity: layerConfig.opacity,\n                                zIndex: 0, // Base layers at bottom\n                            });\n                        } else {\n                            // Vector Layer (Mock Data for demo)\n                            const source = new VectorSource();\n\n                            // Generate mock features if empty and visible\n                            if (\n                                layerConfig.visible &&\n                                source.getFeatures().length === 0\n                            ) {\n                                const count = 5;\n                                const centerLon = 107.63;\n                                const centerLat = -2.85;\n\n                                for (let i = 0; i < count; i++) {\n                                    // Randomize position near Belitung\n                                    const lon =\n                                        centerLon +\n                                        (Math.random() - 0.5) * 0.15;\n                                    const lat =\n                                        centerLat +\n                                        (Math.random() - 0.5) * 0.15;\n\n                                    let geometry;\n                                    if (\n                                        layerConfig.geometryType === 'Polygon'\n                                    ) {\n                                        // Create a small triangle/polygon\n                                        const offset = 0.01;\n                                        geometry = new Polygon([\n                                            [\n                                                fromLonLat([lon, lat]),\n                                                fromLonLat([\n                                                    lon + offset,\n                                                    lat - offset,\n                                                ]),\n                                                fromLonLat([\n                                                    lon - offset,\n                                                    lat - offset,\n                                                ]),\n                                                fromLonLat([lon, lat]),\n                                            ],\n                                        ]);\n                                    } else if (\n                                        layerConfig.geometryType ===\n                                        'LineString'\n                                    ) {\n                                        // Create a squiggly line\n                                        geometry = new LineString([\n                                            fromLonLat([lon, lat]),\n                                            fromLonLat([\n                                                lon + 0.02,\n                                                lat + 0.01,\n                                            ]),\n                                            fromLonLat([\n                                                lon + 0.04,\n                                                lat - 0.01,\n                                            ]),\n                                        ]);\n                                    } else {\n                                        // Default Point\n                                        geometry = new Point(\n                                            fromLonLat([lon, lat])\n                                        );\n                                    }\n\n                                    const feat = new Feature({ geometry });\n                                    feat.set(\n                                        'name',\n                                        `${layerConfig.name} - Unit ${i + 1}`\n                                    );\n                                    feat.set(\n                                        'Type',\n                                        layerConfig.geometryType || 'Unknown'\n                                    );\n                                    feat.set(\n                                        'Zone Code',\n                                        `Z-${Math.floor(Math.random() * 100)}`\n                                    );\n                                    feat.set(\n                                        'Status',\n                                        Math.random() > 0.5\n                                            ? 'Verified'\n                                            : 'Pending'\n                                    );\n                                    feat.setId(`${layerConfig.id}-${i}`);\n                                    source.addFeature(feat);\n                                }\n                            }\n\n                            layer = new VectorLayer({\n                                source: source,\n                                visible: layerConfig.visible,\n                                opacity: layerConfig.opacity,\n                                zIndex: 10,\n                                style: new Style({\n                                    fill: new Fill({\n                                        color: layerConfig.color\n                                            ? `${layerConfig.color}40`\n                                            : 'rgba(16, 185, 129, 0.2)',\n                                    }),\n                                    stroke: new Stroke({\n                                        color: layerConfig.color || '#10b981',\n                                        width: 2,\n                                    }),\n                                    image: new CircleStyle({\n                                        radius: 5,\n                                        fill: new Fill({\n                                            color:\n                                                layerConfig.color || '#10b981',\n                                        }),\n                                        stroke: new Stroke({\n                                            color: '#fff',\n                                            width: 1,\n                                        }),\n                                    }),\n                                }),\n                            });\n                        }\n\n                        map.addLayer(layer);\n                        layerRefs.current[layerConfig.id] = layer;\n                    } else {\n                        // Update existing layer properties\n                        layer.setVisible(layerConfig.visible);\n                        layer.setOpacity(layerConfig.opacity);\n                    }\n                }\n            );\n        });\n    }, [layerGroups]);\n\n    // Handle File Uploads (GeoJSON support)\n    useEffect(() => {\n        if (!filesToLoad || !mapRef.current) return;\n\n        const files = Array.from(filesToLoad);\n\n        files.forEach((file: File) => {\n            console.log('Processing file:', file.name);\n            if (processedFiles.has(file.name)) return;\n\n            const reader = new FileReader();\n\n            if (file.name.endsWith('.geojson') || file.name.endsWith('.json')) {\n                reader.onload = (e) => {\n                    const result = e.target?.result;\n                    if (typeof result === 'string') {\n                        try {\n                            const features = new GeoJSON().readFeatures(\n                                JSON.parse(result),\n                                {\n                                    featureProjection: mapRef.current\n                                        ?.getView()\n                                        .getProjection(),\n                                }\n                            );\n\n                            const vectorSource = new VectorSource({\n                                features: features,\n                            });\n\n                            const vectorLayer = new VectorLayer({\n                                source: vectorSource,\n                                style: new Style({\n                                    stroke: new Stroke({\n                                        color: '#f59e0b',\n                                        width: 2,\n                                    }),\n                                    fill: new Fill({\n                                        color: 'rgba(245, 158, 11, 0.1)',\n                                    }),\n                                    image: new CircleStyle({\n                                        radius: 6,\n                                        fill: new Fill({ color: '#f59e0b' }),\n                                        stroke: new Stroke({\n                                            color: '#fff',\n                                            width: 2,\n                                        }),\n                                    }),\n                                }),\n                            });\n\n                            mapRef.current?.addLayer(vectorLayer);\n\n                            // Zoom to extent\n                            if (features.length > 0) {\n                                const extent = vectorSource.getExtent();\n                                mapRef.current?.getView().fit(extent, {\n                                    padding: [50, 50, 50, 50],\n                                    duration: 1000,\n                                });\n                            }\n\n                            setProcessedFiles((prev) =>\n                                new Set(prev).add(file.name)\n                            );\n                        } catch (err) {\n                            console.error('Error parsing GeoJSON', err);\n                        }\n                    }\n                };\n                reader.readAsText(file);\n            } else {\n                console.log(\n                    `File ${file.name} received. Requires additional parsers.`\n                );\n            }\n        });\n    }, [filesToLoad, processedFiles]);\n\n    // Custom Control Actions\n    const handleZoomIn = () => {\n        const view = mapRef.current?.getView();\n        view?.animate({ zoom: (view.getZoom() || 0) + 1, duration: 250 });\n    };\n\n    const handleZoomOut = () => {\n        const view = mapRef.current?.getView();\n        view?.animate({ zoom: (view.getZoom() || 0) - 1, duration: 250 });\n    };\n\n    const handleReset = () => {\n        // Reset to Belitung\n        mapRef.current?.getView().animate({\n            center: fromLonLat([107.63, -2.85]),\n            zoom: 11,\n            duration: 500,\n        });\n    };\n\n    const handleLocate = () => {\n        if (isLocating) return;\n\n        if (!navigator.geolocation) {\n            alert('Geolocation is not supported by your browser');\n            return;\n        }\n\n        setIsLocating(true);\n\n        navigator.geolocation.getCurrentPosition(\n            (position) => {\n                setIsLocating(false);\n                const { latitude, longitude } = position.coords;\n                const coords = fromLonLat([longitude, latitude]);\n\n                const source = userLocationLayerRef.current?.getSource();\n                if (source) {\n                    source.clear();\n\n                    const svgString = `\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"40\" height=\"40\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#10b981\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n                        <circle cx=\"12\" cy=\"12\" r=\"10\" fill=\"rgba(16, 185, 129, 0.2)\" stroke=\"#10b981\" stroke-width=\"2\" />\n                        <circle cx=\"12\" cy=\"12\" r=\"3\" fill=\"#10b981\" stroke=\"none\" />\n                        <path d=\"M5.5 19c1.5-3 5-4 6.5-4s5 1 6.5 4\" stroke=\"#10b981\" stroke-width=\"2\" />\n                    </svg>\n                `.trim();\n\n                    const iconFeature = new Feature({\n                        geometry: new Point(coords),\n                        name: 'My Location',\n                        isUserLocation: true,\n                    });\n\n                    const iconStyle = new Style({\n                        image: new Icon({\n                            src:\n                                'data:image/svg+xml;utf8,' +\n                                encodeURIComponent(svgString),\n                            scale: 1,\n                            anchor: [0.5, 0.5],\n                        }),\n                    });\n\n                    iconFeature.setStyle(iconStyle);\n                    source.addFeature(iconFeature);\n\n                    mapRef.current?.getView().animate({\n                        center: coords,\n                        zoom: 14,\n                        duration: 1500,\n                    });\n                }\n            },\n            (error) => {\n                setIsLocating(false);\n                let errorMessage = 'An unknown error occurred.';\n                switch (error.code) {\n                    case 1:\n                        errorMessage =\n                            'User denied the request for Geolocation.';\n                        break;\n                    case 2:\n                        errorMessage = 'Location information is unavailable.';\n                        break;\n                    case 3:\n                        errorMessage =\n                            'The request to get user location timed out.';\n                        break;\n                }\n                console.error('Geolocation error:', errorMessage, error);\n                alert(`Unable to locate: ${errorMessage}`);\n            },\n            { enableHighAccuracy: true, timeout: 10000, maximumAge: 0 }\n        );\n    };\n\n    return (\n        <div className=\"relative w-full h-full bg-slate-950\">\n            <div ref={mapElement} className=\"w-full h-full\" />\n\n            {/* Brand Overlay */}\n            <div className=\"absolute top-6 left-6 z-10 flex items-center gap-4 bg-slate-900/80 backdrop-blur-md p-3 pr-6 rounded-2xl border border-slate-700/50 shadow-2xl select-none\">\n                <img\n                    src=\"https://res.cloudinary.com/killtdj/image/upload/v1719635543/Kabupaten_Belitung_paacyj.png\"\n                    alt=\"Logo\"\n                    className=\"w-10 h-12 object-contain drop-shadow-md\"\n                />\n                <div className=\"flex flex-col justify-center\">\n                    <h1 className=\"text-2xl font-black text-white leading-none tracking-tighter\">\n                        SIMTARU\n                    </h1>\n                    <span className=\"text-[10px] text-primary-400 font-bold uppercase tracking-widest mt-0.5 border-t border-slate-700 pt-0.5\">\n                        Kabupaten Belitung\n                    </span>\n                </div>\n            </div>\n\n            {/* Custom Controls Overlay */}\n            <div className=\"absolute bottom-6 right-6 flex flex-col gap-3 z-10\">\n                {/* Navigation Group */}\n                <div className=\"flex flex-col gap-2\">\n                    <button\n                        onClick={handleLocate}\n                        disabled={isLocating}\n                        className=\"p-3 bg-slate-800 text-primary-400 hover:text-primary-300 hover:bg-slate-700 disabled:opacity-70 disabled:cursor-wait rounded shadow-lg border border-slate-600 transition-colors group relative\"\n                        title=\"Locate Me\"\n                    >\n                        {isLocating ? (\n                            <Loader2 size={20} className=\"animate-spin\" />\n                        ) : (\n                            <Locate size={20} />\n                        )}\n                        <span className=\"absolute right-full mr-2 bg-slate-900 text-white text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap\">\n                            {isLocating ? 'Locating...' : 'Locate Me'}\n                        </span>\n                    </button>\n\n                    <button\n                        onClick={handleReset}\n                        className=\"p-3 bg-slate-800 text-slate-200 hover:text-white hover:bg-slate-700 rounded shadow-lg border border-slate-600 transition-colors\"\n                        title=\"Reset View\"\n                    >\n                        <Crosshair size={20} />\n                    </button>\n                </div>\n\n                {/* Zoom Group */}\n                <div className=\"flex flex-col rounded overflow-hidden shadow-lg border border-slate-600 bg-slate-800\">\n                    <button\n                        onClick={handleZoomIn}\n                        className=\"p-3 text-slate-200 hover:text-white hover:bg-slate-700 border-b border-slate-600 transition-colors\"\n                    >\n                        <Plus size={20} />\n                    </button>\n                    <button\n                        onClick={handleZoomOut}\n                        className=\"p-3 text-slate-200 hover:text-white hover:bg-slate-700 transition-colors\"\n                    >\n                        <Minus size={20} />\n                    </button>\n                </div>\n\n                {/* Decorative Compass */}\n                <div className=\"absolute -bottom-1 -right-1 pointer-events-none opacity-50\">\n                    <Compass\n                        size={64}\n                        className=\"text-slate-600\"\n                        strokeWidth={1}\n                    />\n                </div>\n            </div>\n\n            {/* Attribution Override */}\n            <div className=\"absolute bottom-1 left-2 text-[10px] text-slate-500 font-mono pointer-events-none z-10 opacity-70\">\n                Â© OpenStreetMap contributors | GeoGreen Engine\n            </div>\n        </div>\n    );\n};\n\nexport default MapViewer;\n"],"names":[],"mappings":"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"}}]
}