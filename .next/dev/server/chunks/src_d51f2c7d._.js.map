{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":["file:///home/danudenny/Downloads/geogreen-mapper/src/lib/prisma.ts"],"sourcesContent":["import { PrismaPg } from '@prisma/adapter-pg';\nimport { Pool } from 'pg';\nimport { PrismaClient } from '../generated/prisma';\n\nconst prismaClientSingleton = () => {\n    const connectionString = process.env.DATABASE_URL;\n    const pool = new Pool({ connectionString });\n    const adapter = new PrismaPg(pool);\n\n    return new PrismaClient({ adapter });\n};\n\ndeclare global {\n    var prisma: undefined | ReturnType<typeof prismaClientSingleton>;\n}\n\nconst prisma = globalThis.prisma ?? prismaClientSingleton();\n\nexport default prisma;\n\nif (process.env.NODE_ENV !== 'production') globalThis.prisma = prisma;\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;;;;;;AAEA,MAAM,wBAAwB;IAC1B,MAAM,mBAAmB,QAAQ,GAAG,CAAC,YAAY;IACjD,MAAM,OAAO,IAAI,4GAAI,CAAC;QAAE;IAAiB;IACzC,MAAM,UAAU,IAAI,yKAAQ,CAAC;IAE7B,OAAO,IAAI,qJAAY,CAAC;QAAE;IAAQ;AACtC;AAMA,MAAM,SAAS,WAAW,MAAM,IAAI;uCAErB;AAEf,wCAA2C,WAAW,MAAM,GAAG"}},
    {"offset": {"line": 41, "column": 0}, "map": {"version":3,"sources":["file:///home/danudenny/Downloads/geogreen-mapper/src/app/api/legend/%5Blayer%5D/route.ts"],"sourcesContent":["import prisma from '@/lib/prisma';\nimport { NextRequest, NextResponse } from 'next/server';\n\nconst MODEL_MAP: Record<string, any> = {\n    rtrw: prisma.polaRuangRevisiRtrw,\n    badau: prisma.pola_ruang_badau,\n    geopark: prisma.pola_ruang_geopark,\n    tanjung: prisma.pola_ruang_tanjung_kelayang,\n    'badau-net': prisma.jaringan_struktur_ruang_badau,\n    'geopark-net': prisma.jaringan_struktur_ruang_geopark,\n    'tanjung-net': prisma.jaringan_struktur_ruang_tanjung_kelayang,\n    'badau-infra': prisma.infrastruktur_struktur_ruang_badau,\n    'geopark-infra': prisma.infrastruktur_struktur_ruang_geopark,\n    'tanjung-infra': prisma.infrastruktur_struktur_ruang_tanjung_kelayang,\n};\n\nexport async function GET(\n    req: NextRequest,\n    props: { params: Promise<{ layer: string }> }\n) {\n    const params = await props.params;\n    const layer = params.layer;\n\n    const model = MODEL_MAP[layer];\n\n    if (!model) {\n        return new NextResponse('Invalid layer', { status: 404 });\n    }\n\n    try {\n        const categories = await model.findMany({\n            distinct: ['namobj'],\n            select: {\n                namobj: true,\n            },\n            where: {\n                namobj: {\n                    not: null,\n                },\n            },\n        });\n\n        // Extract just the strings and filter any potential nulls/empties\n        const categoryNames = categories\n            .map((c: any) => c.namobj)\n            .filter((name: any): name is string => !!name);\n\n        return NextResponse.json(categoryNames);\n    } catch (error) {\n        console.error(\n            `Error fetching legend categories for layer ${layer}:`,\n            error\n        );\n        return NextResponse.json(\n            { error: 'Internal Server Error' },\n            { status: 500 }\n        );\n    }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;;;;;AAEA,MAAM,YAAiC;IACnC,MAAM,iIAAM,CAAC,mBAAmB;IAChC,OAAO,iIAAM,CAAC,gBAAgB;IAC9B,SAAS,iIAAM,CAAC,kBAAkB;IAClC,SAAS,iIAAM,CAAC,2BAA2B;IAC3C,aAAa,iIAAM,CAAC,6BAA6B;IACjD,eAAe,iIAAM,CAAC,+BAA+B;IACrD,eAAe,iIAAM,CAAC,wCAAwC;IAC9D,eAAe,iIAAM,CAAC,kCAAkC;IACxD,iBAAiB,iIAAM,CAAC,oCAAoC;IAC5D,iBAAiB,iIAAM,CAAC,6CAA6C;AACzE;AAEO,eAAe,IAClB,GAAgB,EAChB,KAA6C;IAE7C,MAAM,SAAS,MAAM,MAAM,MAAM;IACjC,MAAM,QAAQ,OAAO,KAAK;IAE1B,MAAM,QAAQ,SAAS,CAAC,MAAM;IAE9B,IAAI,CAAC,OAAO;QACR,OAAO,IAAI,gJAAY,CAAC,iBAAiB;YAAE,QAAQ;QAAI;IAC3D;IAEA,IAAI;QACA,MAAM,aAAa,MAAM,MAAM,QAAQ,CAAC;YACpC,UAAU;gBAAC;aAAS;YACpB,QAAQ;gBACJ,QAAQ;YACZ;YACA,OAAO;gBACH,QAAQ;oBACJ,KAAK;gBACT;YACJ;QACJ;QAEA,kEAAkE;QAClE,MAAM,gBAAgB,WACjB,GAAG,CAAC,CAAC,IAAW,EAAE,MAAM,EACxB,MAAM,CAAC,CAAC,OAA8B,CAAC,CAAC;QAE7C,OAAO,gJAAY,CAAC,IAAI,CAAC;IAC7B,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CACT,CAAC,2CAA2C,EAAE,MAAM,CAAC,CAAC,EACtD;QAEJ,OAAO,gJAAY,CAAC,IAAI,CACpB;YAAE,OAAO;QAAwB,GACjC;YAAE,QAAQ;QAAI;IAEtB;AACJ"}}]
}