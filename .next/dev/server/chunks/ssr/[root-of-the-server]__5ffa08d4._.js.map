{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///home/danudenny/Downloads/geogreen-mapper/src/constants.ts"],"sourcesContent":["import { LayerGroup } from './types';\n\nexport const INITIAL_LAYER_GROUPS: LayerGroup[] = [\n    {\n        id: 'group-basemap',\n        name: 'Base Maps',\n        icon: 'Map',\n        layers: [\n            {\n                id: 'base-arcgis-street',\n                name: 'ArcGIS Street',\n                visible: false,\n                opacity: 1,\n                type: 'tile',\n                source: 'https://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}',\n            },\n            {\n                id: 'base-arcgis-sat',\n                name: 'ArcGIS Satellite',\n                visible: false,\n                opacity: 1,\n                type: 'tile',\n                source: 'https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}',\n            },\n            {\n                id: 'base-google-street',\n                name: 'Google Street',\n                visible: true,\n                opacity: 1,\n                type: 'tile',\n                source: 'https://mt1.google.com/vt/lyrs=m&x={x}&y={y}&z={z}',\n            },\n            {\n                id: 'base-google-sat',\n                name: 'Google Satellite',\n                visible: false,\n                opacity: 1,\n                type: 'tile',\n                source: 'https://mt1.google.com/vt/lyrs=s&x={x}&y={y}&z={z}',\n            },\n            {\n                id: 'base-carto-dark',\n                name: 'Dark Carto',\n                visible: false,\n                opacity: 1,\n                type: 'tile',\n                source: 'https://basemaps.cartocdn.com/dark_all/{z}/{x}/{y}.png',\n            },\n            {\n                id: 'base-carto-light',\n                name: 'Light Carto',\n                visible: false,\n                opacity: 1,\n                type: 'tile',\n                source: 'https://basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png',\n            },\n        ],\n    },\n    {\n        id: 'group-rtrw',\n        name: 'RTRW Belitung',\n        icon: 'Globe',\n        layers: [\n            {\n                id: 'rtrw-pola',\n                name: 'Pola Ruang',\n                visible: true,\n                opacity: 0.6,\n                type: 'mvt',\n                source: '/api/tiles/rtrw/{z}/{x}/{y}',\n                color: '#10b981',\n                geometryType: 'Polygon',\n            },\n        ],\n    },\n    {\n        id: 'group-badau',\n        name: 'RDTR Badau',\n        icon: 'Hexagon',\n        layers: [\n            {\n                id: 'badau-pola',\n                name: 'Pola Ruang',\n                visible: false,\n                opacity: 0.7,\n                type: 'mvt',\n                source: '/api/tiles/badau/{z}/{x}/{y}',\n                color: '#f59e0b',\n                geometryType: 'Polygon',\n            },\n            {\n                id: 'badau-infra',\n                name: 'Infrastruktur',\n                visible: false,\n                opacity: 1,\n                type: 'mvt',\n                source: '/api/tiles/badau-infra/{z}/{x}/{y}',\n                color: '#ef4444',\n                geometryType: 'Point',\n                apiKey: 'badau-infra',\n            },\n            {\n                id: 'badau-net',\n                name: 'Jaringan',\n                visible: false,\n                opacity: 1,\n                type: 'mvt',\n                source: '/api/tiles/badau-net/{z}/{x}/{y}',\n                color: '#3b82f6',\n                geometryType: 'LineString',\n                apiKey: 'badau-net',\n            },\n        ],\n    },\n    {\n        id: 'group-geopark',\n        name: 'RDTR Geopark',\n        icon: 'Mountain',\n        layers: [\n            {\n                id: 'geo-pola',\n                name: 'Pola Ruang',\n                visible: false,\n                opacity: 0.7,\n                type: 'mvt',\n                source: '/api/tiles/geopark/{z}/{x}/{y}',\n                color: '#8b5cf6',\n                geometryType: 'Polygon',\n                apiKey: 'geopark',\n            },\n            {\n                id: 'geo-infra',\n                name: 'Infrastruktur',\n                visible: false,\n                opacity: 1,\n                type: 'mvt',\n                source: '/api/tiles/geopark-infra/{z}/{x}/{y}',\n                color: '#ec4899',\n                geometryType: 'Point',\n                apiKey: 'geopark-infra',\n            },\n            {\n                id: 'geo-net',\n                name: 'Jaringan',\n                visible: false,\n                opacity: 1,\n                type: 'mvt',\n                source: '/api/tiles/geopark-net/{z}/{x}/{y}',\n                color: '#06b6d4',\n                geometryType: 'LineString',\n                apiKey: 'geopark-net',\n            },\n        ],\n    },\n    {\n        id: 'group-tanjung',\n        name: 'RDTR Tanjung Kelayang',\n        icon: 'Anchor',\n        layers: [\n            {\n                id: 'tj-pola',\n                name: 'Pola Ruang',\n                visible: false,\n                opacity: 0.7,\n                type: 'mvt',\n                source: '/api/tiles/tanjung/{z}/{x}/{y}',\n                color: '#14b8a6',\n                geometryType: 'Polygon',\n                apiKey: 'tanjung',\n            },\n            {\n                id: 'tj-infra',\n                name: 'Infrastruktur',\n                visible: false,\n                opacity: 1,\n                type: 'mvt',\n                source: '/api/tiles/tanjung-infra/{z}/{x}/{y}',\n                color: '#f97316',\n                geometryType: 'Point',\n                apiKey: 'tanjung-infra',\n            },\n            {\n                id: 'tj-net',\n                name: 'Jaringan',\n                visible: false,\n                opacity: 1,\n                type: 'mvt',\n                source: '/api/tiles/tanjung-net/{z}/{x}/{y}',\n                color: '#6366f1',\n                geometryType: 'LineString',\n                apiKey: 'tanjung-net',\n            },\n        ],\n    },\n];\nexport const COLUMN_MAPPING: Record<string, string> = {\n    namobj: 'Nama Objek',\n    jnsrpr: 'Jenis Rencana Pola Ruang',\n    wadmkc: 'Kecamatan',\n    wadmkd: 'Desa / Kelurahan',\n    kkop_1: 'Kawasan Keselamatan Operasi Penerbangan',\n    kp2b_2: 'Kawasan Pertanian Pangan Berkelanjutan',\n    lp2b_2: 'Lahan Pertanian Pangan Berkelanjutan',\n    krb_03: 'Kawasan Rawan Bencana',\n    tod_04: 'Kawasan Berorientasi Transit',\n    teb_05: 'Tempat Evakuasi Bencana',\n    puslit: 'Pusat Penelitian',\n    cagbud: 'Kawasan Cagar Budaya',\n    resair: 'Kawasan Resapan Air',\n    ksmpdn: 'Kawasan Sempadan',\n    hankam: 'Kawasan Pertahanan dan Keamanan',\n    kkarst: 'Kawasan Karst',\n    ptbgmb: 'Kawasan Pertambangan Mineral dan Batubara',\n    mgrsat: 'Kawasan Migrasi Satwa',\n    rdbumi: 'Ruang Dalam Bumi',\n    tpz_00: 'Teknik Pengaturan Zonasi',\n    remark: 'Catatan',\n    luasha: 'Luas Zona',\n};\n\nexport const polaRuangColorSet = [\n    // Existing/Base\n    { namobj: 'Badan Air', color: '#97DBF2' }, // RGB(151, 219, 242) [cite: 1109]\n    { namobj: 'Badan Jalan', color: '#EB1E1E' }, // RGB(235, 30, 30) [cite: 1109]\n    { namobj: 'Cagar Budaya', color: '#FF37CD' }, // RGB(255, 55, 205) [cite: 1106]\n    { namobj: 'Ekosistem Mangrove', color: '#2D966E' }, // RGB(45, 150, 110) [cite: 1106]\n    { namobj: 'Hutan Lindung', color: '#325F28' }, // RGB(50, 95, 40) [cite: 1105]\n    { namobj: 'Hutan Produksi Tetap', color: '#7DB437' }, // RGB(125, 180, 55) [cite: 1107]\n    { namobj: 'Hutan Produksi yang dapat Dikonversi', color: '#9BE137' }, // RGB(155, 225, 55) [cite: 1107]\n    { namobj: 'Instalasi Pengolahan Air Limbah (IPAL)', color: '#FFE687' }, // RGB(255, 230, 135) [cite: 1201]\n    { namobj: 'Instalasi Pengolahan Air Minum (IPAM)', color: '#FFC869' }, // RGB(255, 200, 105) [cite: 1200]\n    { namobj: 'Jalur Hijau', color: '#0F9100' }, // RGB(15, 145, 0) [cite: 1159]\n    { namobj: 'Kawasan Peruntukan Industri', color: '#690000' }, // RGB(105, 0, 0) [cite: 1107]\n    { namobj: 'Keunikan Batuan dan Fosil', color: '#968796' }, // RGB(150, 135, 150) [cite: 1133]\n    { namobj: 'Pariwisata', color: '#FFA5FF' }, // RGB(255, 165, 255) [cite: 1107]\n    { namobj: 'Pemakaman', color: '#5AFF00' }, // RGB(90, 255, 0) [cite: 1159]\n    { namobj: 'Pengelolaan Persampahan', color: '#D79B37' }, // RGB(215, 155, 55) [cite: 1201]\n    { namobj: 'Perdagangan dan Jasa Skala Kota', color: '#FF6464' }, // RGB(255, 100, 100) [cite: 1200]\n    { namobj: 'Perdagangan dan Jasa Skala SWP', color: '#FFA5A5' }, // RGB(255, 165, 165) [cite: 1200]\n    { namobj: 'Perdagangan dan Jasa Skala WP', color: '#FF8282' }, // RGB(255, 130, 130) [cite: 1200]\n    { namobj: 'Perikanan Tangkap', color: '#649BD2' }, // RGB(100, 155, 210) [cite: 1107]\n    { namobj: 'Perkantoran', color: '#9B9B9B' }, // RGB(155, 155, 155) [cite: 1200]\n    { namobj: 'Perkebunan', color: '#AFAF37' }, // RGB(175, 175, 55) [cite: 1134]\n    { namobj: 'Perlindungan Setempat', color: '#05D7D7' }, // RGB(5, 215, 215) [cite: 1106]\n    { namobj: 'Pertahanan dan Keamanan', color: '#9B00FF' }, // RGB(155, 0, 255) [cite: 1108]\n    { namobj: 'Pertambangan Mineral Bukan Logam', color: '#415573' }, // RGB(65, 85, 115) [cite: 1135]\n    { namobj: 'Pertambangan Mineral Logam', color: '#2D415F' }, // RGB(45, 65, 95) [cite: 1135]\n    { namobj: 'Perumahan Kepadatan Rendah', color: '#FFFA4B' }, // RGB(255, 250, 75) [cite: 1199]\n    { namobj: 'Perumahan Kepadatan Sedang', color: '#FFF005' }, // RGB(255, 240, 5) [cite: 1199]\n    { namobj: 'Perumahan Kepadatan Tinggi', color: '#FFDC00' }, // RGB(255, 220, 0) [cite: 1199]\n    { namobj: 'Rimba Kota', color: '#37550A' }, // RGB(55, 85, 10) [cite: 1158]\n    { namobj: 'SPU Skala Kecamatan', color: '#9B329B' }, // RGB(155, 50, 155) [cite: 1199]\n    { namobj: 'SPU Skala Kelurahan', color: '#B94BB9' }, // RGB(185, 75, 185) [cite: 1199]\n    { namobj: 'SPU Skala Kota', color: '#7D197D' }, // RGB(125, 25, 125) [cite: 1199]\n    { namobj: 'Taman Kecamatan', color: '#468700' }, // RGB(70, 135, 0) [cite: 1158]\n    { namobj: 'Taman Kelurahan', color: '#4BA500' }, // RGB(75, 165, 0) [cite: 1159]\n    { namobj: 'Taman Kota', color: '#416900' }, // RGB(65, 105, 0) [cite: 1158]\n    { namobj: 'Taman RW', color: '#50C300' }, // RGB(80, 195, 0) [cite: 1159]\n    { namobj: 'Tanaman Pangan', color: '#C8F546' }, // RGB(200, 245, 70) [cite: 1134]\n    { namobj: 'Transportasi', color: '#D73700' }, // RGB(215, 55, 0) [cite: 1136]\n    { namobj: 'Campuran Intensitas Menengah/Sedang', color: '#F0731E' }, // RGB(240, 115, 30) [cite: 1200]\n    { namobj: 'Campuran Intensitas Tinggi', color: '#F05500' }, // RGB(240, 85, 0) [cite: 1200]\n    { namobj: 'Hortikultura', color: '#E6FF4B' }, // RGB(230, 255, 75) [cite: 1134]\n    { namobj: 'Pergudangan', color: '#373737' }, // RGB(55, 55, 55) [cite: 1201]\n    { namobj: 'Kawasan Keunikan Bentang Alam', color: '#B48796' }, // RGB(180, 135, 150) [cite: 1133]\n    { namobj: 'Kawasan Pembangkitan Tenaga Listrik', color: '#00FFCD' }, // RGB(0, 255, 205) [cite: 1136]\n    { namobj: 'Kawasan Perikanan Budi Daya', color: '#82B9D2' }, // RGB(130, 185, 210) [cite: 1135]\n    { namobj: 'Kawasan Permukiman Perdesaan', color: '#EB9B3C' }, // RGB(235, 155, 60) [cite: 1136]\n    { namobj: 'Kawasan Permukiman Perkotaan', color: '#F59B1E' }, // RGB(245, 155, 30) [cite: 1136]\n    { namobj: 'Kawasan Peruntukan Pertambangan Batuan', color: '#5F7391' }, // RGB(95, 115, 145) [cite: 1135]\n    { namobj: 'Kawasan Suaka Alam', color: '#323287' }, // RGB(50, 50, 135) [cite: 1131]\n    { namobj: 'Taman Hutan Raya', color: '#B9A5FF' }, // RGB(185, 165, 255) [cite: 1132]\n\n    // Explicit \"Kawasan\" prefixed options (to match data variations)\n    { namobj: 'Kawasan Pertambangan Mineral Bukan Logam', color: '#415573' }, // RGB(65, 85, 115) [cite: 1135]\n    { namobj: 'Kawasan Peruntukan Pertambangan Batuan', color: '#5F7391' }, // RGB(95, 115, 145) [cite: 1135]\n    { namobj: 'Kawasan Pertambangan Mineral Logam', color: '#2D415F' }, // RGB(45, 65, 95) [cite: 1135]\n    { namobj: 'Kawasan Keunikan Batuan dan Fosil', color: '#968796' }, // RGB(150, 135, 150) [cite: 1133]\n    { namobj: 'Kawasan Keunikan Bentang Alam', color: '#B48796' }, // RGB(180, 135, 150) [cite: 1133]\n    { namobj: 'Kawasan Suaka Alam', color: '#323287' }, // RGB(50, 50, 135) [cite: 1131]\n    {\n        namobj: 'Kawasan Hutan Produksi yang dapat Dikonversi',\n        color: '#9BE137',\n    }, // RGB(155, 225, 55) [cite: 1107]\n    { namobj: 'Taman Hutan Raya (Tahura)', color: '#B9A5FF' }, // RGB(185, 165, 255) [cite: 1132]\n    { namobj: 'Kawasan Perlindungan Setempat', color: '#05D7D7' }, // RGB(5, 215, 215) [cite: 1106]\n    { namobj: 'Kawasan Hutan Lindung', color: '#325F28' }, // RGB(50, 95, 40) [cite: 1105]\n    { namobj: 'Kawasan Ekosistem Mangrove', color: '#2D966E' }, // RGB(45, 150, 110) [cite: 1106]\n    { namobj: 'Kawasan Hutan Produksi Tetap', color: '#7DB437' }, // RGB(125, 180, 55) [cite: 1107]\n    { namobj: 'Kawasan Tanaman Pangan', color: '#C8F546' }, // RGB(200, 245, 70) [cite: 1134]\n    { namobj: 'Kawasan Perkebunan', color: '#AFAF37' }, // RGB(175, 175, 55) [cite: 1134]\n    { namobj: 'Kawasan Perikanan Tangkap', color: '#649BD2' }, // RGB(100, 155, 210) [cite: 1107]\n    { namobj: 'Kawasan Perikanan Budi Daya', color: '#82B9D2' }, // RGB(130, 185, 210) [cite: 1135]\n    { namobj: 'Kawasan Pariwisata', color: '#FFA5FF' }, // RGB(255, 165, 255) [cite: 1107]\n    { namobj: 'Kawasan Transportasi', color: '#D73700' }, // RGB(215, 55, 0) [cite: 1136]\n    { namobj: 'Kawasan Pertahanan dan Keamanan', color: '#9B00FF' }, // RGB(155, 0, 255) [cite: 1108]\n    { namobj: 'Kawasan Cagar Budaya', color: '#FF37CD' }, // RGB(255, 55, 205) [cite: 1106]\n];\n\nexport const LINE_STYLE = {\n    // ============================\n    // JARINGAN JALAN (Lampiran VII - Tabel VII.1 & VII.6)\n    // ============================\n    'Jalan Kolektor Primer': { color: '#FF8C00', width: 3 }, // RGB(255, 140, 0)\n    'Jalan Kolektor Sekunder': { color: '#FFC800', width: 1.8 }, // RGB(255, 200, 0)\n    'Jalan Lokal Primer': { color: '#9B5AFF', width: 1.7 }, // RGB(155, 90, 255)\n    'Jalan Lokal Sekunder': { color: '#B2B2FF', width: 1.5 }, // RGB(178, 178, 255)\n    'Jalan Lingkungan Primer': { color: '#828282', width: 1 }, // RGB(130, 130, 130)\n    'Jalan Lingkungan Sekunder': { color: '#9C9C9C', width: 0.8 }, // RGB(156, 156, 156)\n    'Jalan Khusus': { color: '#4E4E4E', width: 0.5 }, // RGB(78, 78, 78)\n    'Jalur Sepeda': { color: '#33B300', width: 1.8, dash: [6, 6] }, // RGB(51, 179, 0)\n    'Jalur Evakuasi Bencana': { color: '#FF00FF', width: 2, dash: [8, 8] }, // RGB(255, 0, 255)\n    'Jaringan Pejalan Kaki': { color: '#000000', width: 1.5, dash: [4, 4] },\n\n    // ============================\n    // DRAINASE (Lampiran VII - Tabel VII.16)\n    // ============================\n    // Catatan: Dokumen menyebutkan 10pt (simbol), disesuaikan ke skala web map (2-3px)\n    'Jaringan Drainase Primer': { color: '#004CA8', width: 2.5 }, // RGB(0, 76, 168)\n    'Jaringan Drainase Sekunder': { color: '#FF0000', width: 2 }, // RGB(255, 0, 0) - Sesuai Tabel VII.16\n    'Jaringan Drainase Tersier': { color: '#A900E6', width: 1.5 }, // RGB(169, 0, 230)\n\n    // ============================\n    // AIR MINUM / PIPA (Lampiran VII - Tabel VII.16)\n    // ============================\n    'Pipa Induk': { color: '#824600', width: 1.5 }, // RGB(130, 70, 0)\n    'Pipa Retikulasi': { color: '#BE7800', width: 1 }, // RGB(190, 120, 0)\n    'Jaringan Distribusi Pembagi': { color: '#005CE6', width: 1.4 }, // RGB(0, 92, 230)\n    'Jaringan Transmisi Air Minum': {\n        color: '#00A9E6',\n        width: 1,\n        dash: [4, 4],\n    }, // RGB(0, 169, 230)\n    'Jaringan Transmisi Air Baku': {\n        color: '#004DA8',\n        width: 1,\n        dash: [6, 4],\n    }, // RGB(0, 77, 168)\n\n    // ============================\n    // TELEKOMUNIKASI (Lampiran VII - Tabel VII.16)\n    // ============================\n    'Jaringan Serat Optik': { color: '#3CAA00', width: 1.4, dash: [3, 6] }, // RGB(60, 170, 0)\n    'Telepon Fixed Line': { color: '#3CAA00', width: 1.4 }, // Sama dengan FO\n\n    // ============================\n    // LISTRIK (Lampiran VII - Tabel VII.16)\n    // ============================\n    // Warna Inner Line digunakan (Kuning), Outline (Biru/Merah) bisa ditambahkan sebagai layer terpisah jika perlu\n    'Saluran Udara Tegangan Rendah (SUTR)': {\n        color: '#FFD21E', // RGB(255, 210, 30)\n        width: 2,\n        dash: [10, 4],\n    },\n    'Saluran Udara Tegangan Menengah (SUTM)': {\n        color: '#FFD21E', // RGB(255, 210, 30)\n        width: 2.5,\n        dash: [12, 4],\n    },\n\n    // ============================\n    // INFRASTRUKTUR KHUSUS\n    // ============================\n    'Pengaman Pantai': { color: '#005AE6', width: 2.5, dash: [2, 6] }, // RGB(0, 90, 230)\n};\n\nexport const POINT_STYLE = {\n    // ============================\n    // PUSAT PELAYANAN (Lampiran VII - Tabel VII.16)\n    // ============================\n    'Pusat Pelayanan Kota/Kawasan Perkotaan': {\n        color: '#FF5500', // RGB(255, 85, 0)\n        size: 23,\n    },\n    'Sub Pusat Pelayanan Kota/Kawasan Perkotaan': {\n        color: '#FFB400', // RGB(255, 180, 0)\n        size: 21,\n    },\n    'Pusat Lingkungan Kelurahan/Desa': {\n        color: '#FFFF00', // RGB(255, 255, 0) - Kuning\n        size: 18,\n    },\n\n    // ============================\n    // TRANSPORTASI (Lampiran VII - Tabel VII.16)\n    // ============================\n    'Terminal Penumpang Tipe B': {\n        color: '#FF0000', // RGB(255, 0, 0)\n        size: 25,\n    },\n    'Terminal Penumpang Tipe C': {\n        color: '#8E67FD', // RGB(142, 103, 253) - Ungu Muda\n        size: 25,\n    },\n    Halte: {\n        color: '#F50000', // RGB(245, 0, 0) - Background Merah\n        iconColor: '#FFFFFF', // Foreground Putih\n        size: 23,\n    },\n    Jembatan: {\n        color: '#000000', // RGB(0, 0, 0)\n        size: 23,\n    },\n    'Pelabuhan Pengumpan Lokal': {\n        color: '#ED7B2F', // RGB(237, 123, 47) - Oranye\n        size: 22,\n    },\n    'Pelabuhan Perikanan Samudera': {\n        color: '#6991FD', // RGB(105, 145, 253) - Biru Muda\n        size: 23,\n    },\n    'Pelabuhan Perikanan Pantai': {\n        color: '#8E67FD', // RGB(142, 103, 253) - Ungu\n        size: 23,\n    },\n\n    // ============================\n    // ENERGI (LISTRIK & BBM) (Lampiran VII - Tabel VII.16)\n    // ============================\n    'Gardu Induk': {\n        color: '#FFAA00', // RGB(255, 170, 0) - Background Oranye\n        size: 22,\n    },\n    'Gardu Distribusi': {\n        color: '#FFAA00', // RGB(255, 170, 0) - Background Oranye\n        size: 22,\n    },\n    'Sarana Penyimpanan Bahan Bakar': {\n        color: '#FFAA00', // RGB(255, 170, 0) - Background Oranye\n        size: 20,\n    },\n\n    // ============================\n    // TELEKOMUNIKASI (Lampiran VII - Tabel VII.16)\n    // ============================\n    'Menara Base Transceiver Station (BTS)': {\n        color: '#3CAA00', // RGB(60, 170, 0) - Hijau\n        size: 24,\n    },\n\n    // ============================\n    // SUMBER DAYA AIR & DRAINASE (Lampiran VII - Tabel VII.16)\n    // ============================\n    'Bangunan Pengendalian Banjir': {\n        color: '#005CE6', // RGB(0, 92, 230) - Biru\n        size: 18,\n    },\n    'Bangunan Peresapan (Kolam Retensi)': {\n        color: '#005AE6', // RGB(0, 90, 230) - Biru\n        size: 18,\n    },\n    'Bangunan Pengambil Air Baku': {\n        color: '#005AE6', // RGB(0, 90, 230) - Biru\n        size: 18,\n    },\n    'Instalasi Produksi': {\n        color: '#005CE6', // RGB(0, 92, 230) - Biru\n        size: 18,\n    },\n    'Sumur Pompa': {\n        color: '#00A9E6', // RGB(0, 169, 230) - Biru Langit\n        size: 20,\n    },\n    'Hidran Kebakaran': {\n        color: '#E60000', // RGB(230, 0, 0) - Merah\n        size: 18,\n    },\n\n    // ============================\n    // PERSAMPAHAN & LIMBAH (Lampiran VII - Tabel VII.16)\n    // ============================\n    'Tempat Penampungan Sementara (TPS)': {\n        color: '#AA6E00', // RGB(170, 110, 0) - Coklat (Foreground)\n        backgroundColor: '#FFFFFF',\n        size: 22,\n    },\n    'Tempat Pengelolaan Sampah Reuse, Reduce, Recycle (TPS3R)': {\n        color: '#3CAA00', // RGB(60, 170, 0) - Hijau (Foreground)\n        size: 22,\n    },\n    'Tempat Pengolahan Sampah Terpadu (TPST)': {\n        color: '#CC6666', // RGB(204, 102, 102) - Merah Pucat\n        size: 22,\n    },\n    'IPAL Skala Kawasan Tertentu/Permukiman': {\n        color: '#BE8200', // RGB(190, 130, 0) - Coklat Kuning (Background)\n        size: 22,\n    },\n    'Sistem Pengelolaan Limbah Bahan Berbahaya dan Beracun (B3)': {\n        color: '#824600', // RGB(130, 70, 0) - Coklat Tua (Background)\n        size: 22,\n    },\n\n    // ============================\n    // EVAKUASI BENCANA (Lampiran VII - Tabel VII.19)\n    // ============================\n    'Tempat Evakuasi Sementara': {\n        color: '#F5A27A', // RGB(245, 162, 122) - Outline Oranye Pucat\n        outlineColor: '#FF5500', // RGB(255, 85, 0) - Outline Oranye\n        size: 18,\n    },\n    'Tempat Evakuasi Akhir': {\n        color: '#894465', // RGB(137, 68, 101) - Ungu Tua (Outline)\n        size: 18,\n    },\n};\n\nexport const ANALYSIS_LAYERS = [\n    { id: 'rtrw', name: 'RTRW Belitung (Pola Ruang)', type: 'Polygon' },\n    { id: 'badau', name: 'RDTR Badau (Pola Ruang)', type: 'Polygon' },\n    { id: 'geopark', name: 'RDTR Geopark (Pola Ruang)', type: 'Polygon' },\n    {\n        id: 'tanjung',\n        name: 'RDTR Tanjung Kelayang (Pola Ruang)',\n        type: 'Polygon',\n    },\n    { id: 'badau-infra', name: 'RDTR Badau (Infrastruktur)', type: 'Point' },\n    {\n        id: 'geopark-infra',\n        name: 'RDTR Geopark (Infrastruktur)',\n        type: 'Point',\n    },\n    {\n        id: 'tanjung-infra',\n        name: 'RDTR Tanjung Kelayang (Infrastruktur)',\n        type: 'Point',\n    },\n    { id: 'badau-net', name: 'RDTR Badau (Jaringan)', type: 'LineString' },\n    { id: 'geopark-net', name: 'RDTR Geopark (Jaringan)', type: 'LineString' },\n    {\n        id: 'tanjung-net',\n        name: 'RDTR Tanjung Kelayang (Jaringan)',\n        type: 'LineString',\n    },\n];\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 865, "column": 0}, "map": {"version":3,"sources":["file:///home/danudenny/Downloads/geogreen-mapper/src/components/AnalysisPanel.tsx"],"sourcesContent":["'use client';\n\nimport { ANALYSIS_LAYERS, polaRuangColorSet } from '@/constants';\nimport { AnalysisResult } from '@/hooks/useAnalysis';\nimport {\n    AlertTriangle,\n    BarChart3,\n    CheckCircle2,\n    Download,\n    FileText,\n    Info,\n    LayoutDashboard,\n    Loader2,\n    PieChart as PieChartIcon,\n    X,\n} from 'lucide-react';\nimport React, { useEffect, useMemo, useState } from 'react';\nimport {\n    Cell,\n    Legend,\n    Pie,\n    PieChart,\n    ResponsiveContainer,\n    Sector,\n} from 'recharts';\n\ninterface AnalysisPanelProps {\n    uploadedFiles: File[];\n    analysisState: {\n        runAnalysis: (file: File, layerId?: string) => Promise<void>;\n        isAnalyzing: boolean;\n        results: AnalysisResult[] | null;\n        error: string | null;\n    };\n    close: () => void;\n}\n\n// Helper untuk format angka Indonesia (contoh: 1.234,56)\nconst formatNumber = (num: number) =>\n    new Intl.NumberFormat('id-ID', {\n        minimumFractionDigits: 2,\n        maximumFractionDigits: 2,\n    }).format(num);\n\n// --- Sub-components ---\n\nconst StatCard = ({\n    label,\n    value,\n    subValue,\n    icon: Icon,\n    colorClass,\n}: {\n    label: string;\n    value: string;\n    subValue?: string;\n    icon: any;\n    colorClass: string;\n}) => (\n    <div className=\"bg-slate-800/40 border border-slate-700/50 p-2.5 rounded-xl flex items-start justify-between\">\n        <div>\n            <p className=\"text-[10px] text-slate-400 font-medium uppercase tracking-wider mb-0.5\">\n                {label}\n            </p>\n            <p className=\"text-base font-bold text-slate-100\">{value}</p>\n            {subValue && (\n                <p className=\"text-[10px] text-slate-500 mt-0.5\">{subValue}</p>\n            )}\n        </div>\n        <div className={`p-1.5 rounded-lg ${colorClass} bg-opacity-10`}>\n            <Icon size={14} className={colorClass.replace('bg-', 'text-')} />\n        </div>\n    </div>\n);\n\n// Custom Render untuk Donut Chart yang Aktif\nconst renderActiveShape = (props: any) => {\n    const {\n        cx,\n        cy,\n        innerRadius,\n        outerRadius,\n        startAngle,\n        endAngle,\n        fill,\n        payload,\n        percent,\n    } = props;\n\n    return (\n        <g>\n            <text\n                x={cx}\n                y={cy}\n                dy={-10}\n                textAnchor=\"middle\"\n                fill=\"#94a3b8\"\n                fontSize={9}\n            >\n                {payload.category.substring(0, 15)}...\n            </text>\n            <text\n                x={cx}\n                y={cy}\n                dy={12}\n                textAnchor=\"middle\"\n                fill=\"#f1f5f9\"\n                fontSize={14}\n                fontWeight=\"bold\"\n            >\n                {`${(percent * 100).toFixed(1)}%`}\n            </text>\n            <Sector\n                cx={cx}\n                cy={cy}\n                innerRadius={innerRadius}\n                outerRadius={outerRadius + 4}\n                startAngle={startAngle}\n                endAngle={endAngle}\n                fill={fill}\n            />\n            <Sector\n                cx={cx}\n                cy={cy}\n                startAngle={startAngle}\n                endAngle={endAngle}\n                innerRadius={innerRadius - 4}\n                outerRadius={innerRadius - 2}\n                fill={fill}\n            />\n        </g>\n    );\n};\n\nconst AnalysisPanel: React.FC<AnalysisPanelProps> = ({\n    uploadedFiles,\n    analysisState,\n    close,\n}) => {\n    const { runAnalysis, isAnalyzing, results, error } = analysisState;\n    const [selectedFile, setSelectedFile] = useState<File | null>(null);\n    const [selectedTargetLayer, setSelectedTargetLayer] = useState(\n        ANALYSIS_LAYERS[0].id\n    );\n    const [activeIndex, setActiveIndex] = useState(0);\n\n    // Otomatis pilih file pertama jika ada\n    useEffect(() => {\n        if (uploadedFiles.length > 0 && !selectedFile) {\n            setSelectedFile(uploadedFiles[0]);\n        }\n    }, [uploadedFiles, selectedFile]);\n\n    const handleRun = () => {\n        if (selectedFile) runAnalysis(selectedFile, selectedTargetLayer);\n    };\n\n    const getColor = (name: string) => {\n        const item = polaRuangColorSet.find(\n            (c) => c.namobj.toLowerCase() === name.toLowerCase()\n        );\n        return item ? item.color : '#64748b'; // default slate-500\n    };\n\n    // Statistik Turunan\n    const stats = useMemo(() => {\n        if (!results || results.length === 0) return null;\n        const totalArea = results.reduce((acc, curr) => acc + curr.areaHa, 0);\n        const dominant = [...results].sort((a, b) => b.areaHa - a.areaHa)[0];\n        const categoryCount = results.length;\n\n        return { totalArea, dominant, categoryCount };\n    }, [results]);\n\n    // Handle Ekspor CSV\n    const handleExport = () => {\n        if (!results) return;\n        const headers = 'Kategori (Pola Ruang),Luas (Ha),Persentase (%)\\n';\n        const rows = results\n            .map(\n                (r) =>\n                    `\"${r.category}\",${r.areaHa\n                        .toFixed(2)\n                        .replace('.', ',')},${r.percentage\n                        .toFixed(2)\n                        .replace('.', ',')}`\n            )\n            .join('\\n');\n        const blob = new Blob([headers + rows], { type: 'text/csv' });\n        const url = window.URL.createObjectURL(blob);\n        const a = document.createElement('a');\n        a.href = url;\n        a.download = `analisis_${selectedFile?.name || 'result'}.csv`;\n        a.click();\n    };\n\n    return (\n        <div className=\"absolute right-4 top-4 bottom-4 w-[420px] bg-slate-900/95 backdrop-blur-md border border-slate-700 rounded-xl flex flex-col animate-in slide-in-from-right duration-300 z-30 shadow-2xl overflow-hidden\">\n            {/* Header */}\n            <div className=\"p-4 border-b border-slate-700 flex justify-between items-center bg-slate-900 shadow-sm\">\n                <div>\n                    <h2 className=\"text-base font-bold text-slate-100 flex items-center gap-2\">\n                        <PieChartIcon size={18} className=\"text-primary-400\" />\n                        Analisis Spasial\n                    </h2>\n                    <p className=\"text-[10px] text-slate-400 font-mono mt-0.5\">\n                        TUMPANG SUSUN & HITUNG LUASAN\n                    </p>\n                </div>\n                <button\n                    onClick={close}\n                    className=\"w-7 h-7 flex items-center justify-center rounded-full bg-slate-800 text-slate-400 hover:bg-slate-700 hover:text-white transition-all\"\n                    title=\"Tutup Panel\"\n                >\n                    <X size={16} />\n                </button>\n            </div>\n\n            <div className=\"flex-1 overflow-y-auto p-4 space-y-5 scrollbar-thin scrollbar-thumb-slate-700 scrollbar-track-transparent\">\n                {/* 1. Bagian Input */}\n                <div className=\"bg-slate-800/40 rounded-xl p-3.5 border border-slate-700/60 space-y-3\">\n                    <div>\n                        <label className=\"text-[10px] font-bold text-slate-400 uppercase mb-1 block\">\n                            Geometri Target\n                        </label>\n                        {uploadedFiles.length === 0 ? (\n                            <div className=\"p-2.5 bg-slate-900/50 rounded border border-slate-700 border-dashed text-[10px] text-slate-500 text-center\">\n                                Belum ada file. Silakan impor data dulu.\n                            </div>\n                        ) : (\n                            <div className=\"relative\">\n                                <FileText\n                                    size={14}\n                                    className=\"absolute left-3 top-3 text-slate-500\"\n                                />\n                                <select\n                                    className=\"w-full bg-slate-900 border border-slate-700 rounded-lg py-2 pl-8 pr-2 text-xs text-slate-200 focus:ring-1 focus:ring-primary-500 focus:border-primary-500 outline-none appearance-none cursor-pointer transition-colors hover:border-slate-600\"\n                                    value={selectedFile?.name || ''}\n                                    onChange={(e) =>\n                                        setSelectedFile(\n                                            uploadedFiles.find(\n                                                (f) => f.name === e.target.value\n                                            ) || null\n                                        )\n                                    }\n                                >\n                                    {uploadedFiles.map((f) => (\n                                        <option key={f.name} value={f.name}>\n                                            {f.name}\n                                        </option>\n                                    ))}\n                                </select>\n                            </div>\n                        )}\n                    </div>\n\n                    <div className=\"relative pl-3 border-l-2 border-slate-700 ml-1 py-0.5\">\n                        <label className=\"text-[10px] font-bold text-slate-400 uppercase mb-1 block\">\n                            Target Layer\n                        </label>\n                        <select\n                            className=\"w-full bg-slate-900 border border-slate-700 rounded-lg py-2 px-3 text-xs text-slate-200 focus:ring-1 focus:ring-primary-500 focus:border-primary-500 outline-none appearance-none cursor-pointer transition-colors hover:border-slate-600\"\n                            value={selectedTargetLayer}\n                            onChange={(e) =>\n                                setSelectedTargetLayer(e.target.value)\n                            }\n                        >\n                            {ANALYSIS_LAYERS.map((layer) => (\n                                <option key={layer.id} value={layer.id}>\n                                    {layer.name}\n                                </option>\n                            ))}\n                        </select>\n                    </div>\n\n                    <button\n                        onClick={handleRun}\n                        disabled={!selectedFile || isAnalyzing}\n                        className=\"w-full py-2 bg-gradient-to-r from-primary-600 to-primary-500 hover:from-primary-500 hover:to-primary-400 disabled:from-slate-700 disabled:to-slate-800 disabled:cursor-not-allowed text-white text-xs font-bold rounded-lg shadow-lg shadow-primary-900/20 transition-all flex items-center justify-center gap-2 active:scale-[0.98]\"\n                    >\n                        {isAnalyzing ? (\n                            <>\n                                <Loader2 size={14} className=\"animate-spin\" />\n                                Memproses Data...\n                            </>\n                        ) : (\n                            <>\n                                <BarChart3 size={16} />\n                                Jalankan Analisis\n                            </>\n                        )}\n                    </button>\n                </div>\n\n                {/* Status Error */}\n                {error && (\n                    <div className=\"bg-red-500/10 border border-red-500/20 p-3 rounded-xl flex gap-3 text-red-400 text-xs animate-in fade-in zoom-in-95\">\n                        <AlertTriangle size={16} className=\"shrink-0\" />\n                        <div>\n                            <p className=\"font-bold\">Analisis Gagal</p>\n                            <p className=\"text-red-400/80 text-[10px] mt-0.5\">\n                                {error}\n                            </p>\n                        </div>\n                    </div>\n                )}\n\n                {/* 2. Dashboard Hasil */}\n                {results && stats && (\n                    <div className=\"space-y-4 animate-in fade-in slide-in-from-bottom-6 duration-700\">\n                        <div className=\"grid grid-cols-2 gap-2\">\n                            <StatCard\n                                label={\n                                    results[0]?.unit === 'm'\n                                        ? 'Total Panjang'\n                                        : results[0]?.unit === 'items'\n                                        ? 'Total Item'\n                                        : 'Total Luas'\n                                }\n                                value={`${formatNumber(stats.totalArea)} ${\n                                    results[0]?.unit === 'm'\n                                        ? 'km'\n                                        : results[0]?.unit === 'items'\n                                        ? ''\n                                        : 'Ha'\n                                }`}\n                                icon={LayoutDashboard}\n                                colorClass=\"bg-blue-500\"\n                            />\n                            <StatCard\n                                label=\"Dominan\"\n                                value={`${stats.dominant.percentage.toFixed(\n                                    1\n                                )}%`}\n                                subValue={stats.dominant.category}\n                                icon={CheckCircle2}\n                                colorClass=\"bg-emerald-500\"\n                            />\n                        </div>\n\n                        {/* Visualisasi */}\n                        <div className=\"bg-slate-800/20 border border-slate-700/50 rounded-xl p-3\">\n                            <h3 className=\"text-[10px] font-bold text-slate-400 uppercase mb-3 flex items-center justify-between\">\n                                Komposisi Ruang\n                                <Info\n                                    size={12}\n                                    className=\"text-slate-600 cursor-help\"\n                                />\n                            </h3>\n                            <div className=\"h-56 w-full -ml-2\">\n                                <ResponsiveContainer width=\"100%\" height=\"100%\">\n                                    <PieChart>\n                                        <Pie\n                                            activeShape={renderActiveShape}\n                                            data={results}\n                                            dataKey=\"areaHa\"\n                                            nameKey=\"category\"\n                                            cx=\"50%\"\n                                            cy=\"50%\"\n                                            innerRadius={50}\n                                            outerRadius={70}\n                                            paddingAngle={3}\n                                            onMouseEnter={(_, index) =>\n                                                setActiveIndex(index)\n                                            }\n                                        >\n                                            {results.map((entry, index) => (\n                                                <Cell\n                                                    key={`cell-${index}`}\n                                                    fill={getColor(\n                                                        entry.category\n                                                    )}\n                                                    stroke=\"rgba(15, 23, 42, 0.5)\"\n                                                    strokeWidth={2}\n                                                />\n                                            ))}\n                                        </Pie>\n                                        <Legend\n                                            verticalAlign=\"bottom\"\n                                            height={64}\n                                            iconType=\"circle\"\n                                            iconSize={6}\n                                            formatter={(value) => (\n                                                <span className=\"text-slate-400 text-[9px]\">\n                                                    {value}\n                                                </span>\n                                            )}\n                                        />\n                                    </PieChart>\n                                </ResponsiveContainer>\n                            </div>\n                        </div>\n\n                        {/* Tabel Rincian */}\n                        <div className=\"space-y-1.5\">\n                            <div className=\"flex justify-between items-center mb-1\">\n                                <h3 className=\"text-xs font-bold text-slate-200\">\n                                    Rincian\n                                </h3>\n                                <button\n                                    onClick={handleExport}\n                                    className=\"text-[10px] flex items-center gap-1 text-primary-400 hover:text-primary-300 transition-colors\"\n                                >\n                                    <Download size={10} />\n                                    Ekspor CSV\n                                </button>\n                            </div>\n\n                            <div className=\"bg-slate-900 rounded-lg border border-slate-800 overflow-hidden\">\n                                <div className=\"max-h-52 overflow-y-auto scrollbar-thin scrollbar-thumb-slate-700\">\n                                    <table className=\"w-full text-xs\">\n                                        <thead className=\"sticky top-0 bg-slate-800 text-[10px] text-slate-400 font-semibold uppercase z-10 shadow-sm\">\n                                            <tr>\n                                                <th className=\"px-3 py-2 text-left\">\n                                                    Zona / Pola Ruang\n                                                </th>\n                                                <th className=\"px-3 py-2 text-right\">\n                                                    Luas (Ha)\n                                                </th>\n                                            </tr>\n                                        </thead>\n                                        <tbody className=\"divide-y divide-slate-800/50\">\n                                            {results.map((r, i) => (\n                                                <tr\n                                                    key={i}\n                                                    className=\"group hover:bg-slate-800/50 transition-colors\"\n                                                    onMouseEnter={() =>\n                                                        setActiveIndex(i)\n                                                    }\n                                                >\n                                                    <td className=\"px-3 py-2\">\n                                                        <div className=\"flex flex-col gap-0.5\">\n                                                            <div className=\"flex items-center gap-1.5\">\n                                                                <div\n                                                                    className=\"w-1.5 h-1.5 rounded-full shrink-0 shadow-sm\"\n                                                                    style={{\n                                                                        backgroundColor:\n                                                                            getColor(\n                                                                                r.category\n                                                                            ),\n                                                                    }}\n                                                                />\n                                                                <span\n                                                                    className=\"text-slate-300 font-medium truncate max-w-[130px]\"\n                                                                    title={\n                                                                        r.category\n                                                                    }\n                                                                >\n                                                                    {r.category}\n                                                                </span>\n                                                            </div>\n                                                            {/* Mini Progress Bar di Tabel */}\n                                                            <div className=\"w-full h-0.5 bg-slate-800 rounded-full overflow-hidden\">\n                                                                <div\n                                                                    className=\"h-full rounded-full opacity-80\"\n                                                                    style={{\n                                                                        width: `${r.percentage}%`,\n                                                                        backgroundColor:\n                                                                            getColor(\n                                                                                r.category\n                                                                            ),\n                                                                    }}\n                                                                />\n                                                            </div>\n                                                        </div>\n                                                    </td>\n                                                    <td className=\"px-3 py-2 text-right align-top\">\n                                                        <div className=\"text-slate-200 font-mono text-[10px]\">\n                                                            {formatNumber(\n                                                                r.areaHa\n                                                            )}\n                                                        </div>\n                                                        <div className=\"text-slate-500 text-[9px]\">\n                                                            {r.percentage.toFixed(\n                                                                1\n                                                            )}\n                                                            %\n                                                        </div>\n                                                    </td>\n                                                </tr>\n                                            ))}\n                                        </tbody>\n                                    </table>\n                                </div>\n                                <div className=\"px-3 py-2 bg-slate-800/50 border-t border-slate-800 flex justify-between items-center text-[10px] text-slate-400\">\n                                    <span>Total Luas</span>\n                                    <span className=\"font-mono text-slate-200\">\n                                        {formatNumber(stats.totalArea)} Ha\n                                    </span>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                )}\n\n                {/* 3. Empty State (No Intersection) */}\n                {results && results.length === 0 && (\n                    <div className=\"bg-slate-800/40 border border-slate-700/60 rounded-xl p-6 text-center animate-in fade-in slide-in-from-bottom-2\">\n                        <div className=\"w-12 h-12 rounded-full bg-slate-800 mx-auto flex items-center justify-center mb-3 text-slate-500\">\n                            <AlertTriangle size={20} />\n                        </div>\n                        <h3 className=\"text-sm font-bold text-slate-300 mb-1\">\n                            Tidak Ada Intersect\n                        </h3>\n                        <p className=\"text-xs text-slate-500 max-w-[200px] mx-auto\">\n                            Geometri input tidak bersinggungan dengan layer\n                            target. Coba pilih layer lain atau cek lokasi data.\n                        </p>\n                    </div>\n                )}\n            </div>\n        </div>\n    );\n};\n\nexport default AnalysisPanel;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1739, "column": 0}, "map": {"version":3,"sources":["file:///home/danudenny/Downloads/geogreen-mapper/src/components/FeaturePopup.tsx"],"sourcesContent":["import {\n    Activity,\n    Calendar,\n    Check,\n    Copy,\n    ExternalLink,\n    FileText,\n    Hash,\n    Loader2,\n    MapPin,\n    X,\n} from 'lucide-react';\nimport { useEffect, useState } from 'react';\nimport { COLUMN_MAPPING } from '../constants'; // Pastikan path ini benar\nimport { SelectedFeature } from '../types'; // Pastikan path ini benar\n\ninterface FeaturePopupProps {\n    feature: SelectedFeature | null;\n    onClose: () => void;\n    onZoom?: (feature: SelectedFeature) => void; // Opsional: untuk tombol Zoom\n    onExport?: (feature: SelectedFeature) => void; // Opsional: untuk tombol Export\n}\n\nconst FeaturePopup: React.FC<FeaturePopupProps> = ({\n    feature,\n    onClose,\n    onZoom,\n    onExport,\n}) => {\n    const [details, setDetails] = useState<Record<string, any> | null>(null);\n    const [isLoading, setIsLoading] = useState(false);\n    const [copiedKey, setCopiedKey] = useState<string | null>(null);\n\n    // Reset details ketika feature berubah\n    useEffect(() => {\n        if (!feature) {\n            setDetails(null);\n            return;\n        }\n\n        const id = feature.id || feature.properties?.gid;\n\n        // Logika fetch data detail (seperti kode asli Anda)\n        const shouldFetch = id && !(typeof id === 'string' && id.includes('.'));\n\n        if (!shouldFetch) {\n            setDetails(feature.properties);\n            return;\n        }\n\n        const fetchDetails = async () => {\n            setIsLoading(true);\n            try {\n                // Use feature.layerId which corresponds to the apiKey (rtrw, badau, etc.)\n                const layer = feature.layerId || 'rtrw'; // Default to rtrw if unknown\n                const res = await fetch(`/api/features/${layer}/${id}`);\n                if (res.ok) {\n                    const data = await res.json();\n                    setDetails(data);\n                } else {\n                    // Fallback to existing properties if fetch fails\n                    setDetails(feature.properties);\n                }\n            } catch (error) {\n                console.error('Failed to fetch feature details', error);\n                setDetails(feature.properties);\n            } finally {\n                setIsLoading(false);\n            }\n        };\n\n        fetchDetails();\n    }, [feature]);\n\n    // Handle Copy to Clipboard\n    const handleCopy = (text: string, key: string) => {\n        navigator.clipboard.writeText(text);\n        setCopiedKey(key);\n        setTimeout(() => setCopiedKey(null), 2000);\n    };\n\n    // Format Value Helper\n    const formatValue = (key: string, value: any) => {\n        if (value === null || value === undefined || value === '') {\n            return <span className=\"text-slate-600 italic text-xs\">Empty</span>;\n        }\n\n        // Jika URL\n        if (\n            typeof value === 'string' &&\n            (value.startsWith('http') || value.startsWith('www'))\n        ) {\n            return (\n                <a\n                    href={value}\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    className=\"text-primary-400 hover:text-primary-300 hover:underline flex items-center gap-1 break-all\"\n                >\n                    {value} <ExternalLink size={10} />\n                </a>\n            );\n        }\n\n        // Jika Tanggal (deteksi sederhana string ISO)\n        if (\n            typeof value === 'string' &&\n            !isNaN(Date.parse(value)) &&\n            value.length > 10 &&\n            (key.toLowerCase().includes('date') ||\n                key.toLowerCase().includes('time'))\n        ) {\n            return new Date(value).toLocaleDateString('id-ID', {\n                day: 'numeric',\n                month: 'short',\n                year: 'numeric',\n                hour: '2-digit',\n                minute: '2-digit',\n            });\n        }\n\n        // Jika Object/Array\n        if (typeof value === 'object') {\n            return (\n                <pre className=\"text-[10px] bg-slate-950 p-2 rounded border border-slate-800 overflow-x-auto\">\n                    {JSON.stringify(value, null, 2)}\n                </pre>\n            );\n        }\n\n        return String(value);\n    };\n\n    // Icon Helper\n    const getIconForProp = (key: string) => {\n        const k = key.toLowerCase();\n        if (k.includes('date') || k.includes('time'))\n            return <Calendar size={14} className=\"text-blue-400\" />;\n        if (k.includes('id') || k.includes('code') || k.includes('gid'))\n            return <Hash size={14} className=\"text-orange-400\" />;\n        if (k.includes('name') || k.includes('obj'))\n            return <FileText size={14} className=\"text-emerald-400\" />;\n        if (k.includes('stat') || k.includes('val') || k.includes('luas'))\n            return <Activity size={14} className=\"text-purple-400\" />;\n        return <div className=\"w-1.5 h-1.5 rounded-full bg-slate-500\" />;\n    };\n\n    if (!feature) return null;\n\n    const displayProperties = details || feature.properties || {};\n    const title =\n        displayProperties['namobj'] ||\n        displayProperties['name'] ||\n        displayProperties['NAMOBJ'] ||\n        `Feature #${feature.id}`;\n\n    return (\n        <div className=\"absolute right-4 top-4 bottom-4 w-96 bg-slate-900/95 backdrop-blur-xl border border-slate-700/50 shadow-2xl z-30 flex flex-col rounded-xl overflow-hidden animate-in slide-in-from-right-4 duration-300\">\n            {/* Header */}\n            <div className=\"px-5 py-4 border-b border-slate-700 bg-gradient-to-r from-slate-800/50 to-slate-900/50 flex justify-between items-start shrink-0\">\n                <div className=\"overflow-hidden\">\n                    <div className=\"flex items-center gap-2 text-primary-400 mb-1.5\">\n                        <MapPin size={14} />\n                        <span className=\"text-[10px] font-bold tracking-widest uppercase text-primary-400/80\">\n                            Feature Information\n                        </span>\n                    </div>\n                    <h2\n                        className=\"text-lg font-bold text-white font-mono truncate leading-tight\"\n                        title={String(title)}\n                    >\n                        {title}\n                    </h2>\n                    <div className=\"flex gap-2 mt-2\">\n                        <span className=\"text-[10px] font-medium text-slate-400 bg-slate-800 px-2 py-0.5 rounded border border-slate-700 uppercase\">\n                            {feature.geometryType || 'Geometry'}\n                        </span>\n                        {isLoading && (\n                            <span className=\"text-[10px] flex items-center gap-1 text-yellow-500\">\n                                <Loader2 size={10} className=\"animate-spin\" />{' '}\n                                Syncing...\n                            </span>\n                        )}\n                    </div>\n                </div>\n                <button\n                    onClick={onClose}\n                    className=\"p-1.5 hover:bg-slate-700 rounded-md text-slate-400 hover:text-white transition-all active:scale-95\"\n                >\n                    <X size={18} />\n                </button>\n            </div>\n\n            {/* Content Area */}\n            <div className=\"flex-1 overflow-y-auto scrollbar-thin scrollbar-thumb-slate-700 scrollbar-track-transparent relative\">\n                {isLoading && !details && (\n                    <div className=\"absolute inset-0 bg-slate-900/80 backdrop-blur-sm flex flex-col items-center justify-center z-10 text-slate-400 gap-3\">\n                        <Loader2\n                            className=\"animate-spin text-primary-500\"\n                            size={32}\n                        />\n                        <span className=\"text-xs\">\n                            Fetching detailed attributes...\n                        </span>\n                    </div>\n                )}\n\n                <div className=\"divide-y divide-slate-800/50\">\n                    {Object.entries(displayProperties).map(([key, value]) => {\n                        // Filter out heavy geometry columns\n                        if (\n                            ['geom', 'geometry', 'the_geom', 'bbox'].includes(\n                                key.toLowerCase()\n                            )\n                        )\n                            return null;\n\n                        const label =\n                            COLUMN_MAPPING[key.toLowerCase()] ||\n                            key\n                                .replace(/_/g, ' ')\n                                .replace(/\\b\\w/g, (c) => c.toUpperCase());\n                        const valString =\n                            typeof value === 'object'\n                                ? JSON.stringify(value)\n                                : String(value);\n\n                        return (\n                            <div\n                                key={key}\n                                className=\"group flex flex-col hover:bg-slate-800/30 transition-colors px-5 py-3\"\n                            >\n                                <div className=\"flex items-center justify-between mb-1\">\n                                    <div className=\"flex items-center gap-2 text-xs font-medium text-slate-500 uppercase tracking-wide\">\n                                        {getIconForProp(key)}\n                                        {label}\n                                    </div>\n\n                                    {/* Copy Button (Only shows on hover) */}\n                                    <button\n                                        onClick={() =>\n                                            handleCopy(valString, key)\n                                        }\n                                        className=\"opacity-0 group-hover:opacity-100 transition-opacity text-slate-500 hover:text-primary-400 p-1\"\n                                        title=\"Copy value\"\n                                    >\n                                        {copiedKey === key ? (\n                                            <Check\n                                                size={12}\n                                                className=\"text-emerald-500\"\n                                            />\n                                        ) : (\n                                            <Copy size={12} />\n                                        )}\n                                    </button>\n                                </div>\n\n                                <div className=\"pl-6 text-sm text-slate-200 font-mono break-words leading-relaxed\">\n                                    {formatValue(key, value)}\n                                </div>\n                            </div>\n                        );\n                    })}\n                </div>\n\n                {!isLoading && Object.keys(displayProperties).length === 0 && (\n                    <div className=\"h-full flex flex-col items-center justify-center text-slate-500 p-8 text-center\">\n                        <FileText size={32} className=\"mb-2 opacity-50\" />\n                        <p className=\"text-sm\">\n                            No properties found for this layer.\n                        </p>\n                    </div>\n                )}\n            </div>\n\n            {/* Footer Actions */}\n            <div className=\"p-4 border-t border-slate-700 bg-slate-900/90 shrink-0 grid grid-cols-2 gap-3\">\n                <button\n                    onClick={() => onZoom?.(feature)}\n                    className=\"flex items-center justify-center gap-2 px-4 py-2 bg-slate-800 hover:bg-slate-700 hover:text-white text-slate-300 text-xs font-bold rounded-lg border border-slate-600 transition-all active:scale-95\"\n                >\n                    <MapPin size={14} /> ZOOM TO\n                </button>\n                <button\n                    onClick={() => onExport?.(feature)}\n                    className=\"flex items-center justify-center gap-2 px-4 py-2 bg-primary-600 hover:bg-primary-500 text-white text-xs font-bold rounded-lg shadow-lg shadow-primary-900/20 hover:shadow-primary-900/40 transition-all active:scale-95 border border-transparent hover:border-primary-400\"\n                >\n                    <ExternalLink size={14} /> EXPORT JSON\n                </button>\n            </div>\n        </div>\n    );\n};\n\nexport default FeaturePopup;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2211, "column": 0}, "map": {"version":3,"sources":["file:///home/danudenny/Downloads/geogreen-mapper/src/components/ui/Switch.tsx"],"sourcesContent":["import React from 'react';\n\ninterface SwitchProps {\n    checked: boolean;\n    onChange: (checked: boolean) => void;\n    disabled?: boolean;\n    className?: string;\n}\n\nconst Switch: React.FC<SwitchProps> = ({\n    checked,\n    onChange,\n    disabled = false,\n    className = '',\n}) => {\n    return (\n        <button\n            type=\"button\"\n            role=\"switch\"\n            aria-checked={checked}\n            disabled={disabled}\n            onClick={() => !disabled && onChange(!checked)}\n            className={`\n                relative inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent \n                transition-colors duration-200 ease-in-out focus:outline-none focus-visible:ring-2 \n                focus-visible:ring-primary-500 focus-visible:ring-offset-2 focus-visible:ring-offset-slate-900\n                ${checked ? 'bg-primary-500' : 'bg-slate-700'}\n                ${disabled ? 'opacity-50 cursor-not-allowed' : ''}\n                ${className}\n            `}\n        >\n            <span className=\"sr-only\">Use setting</span>\n            <span\n                aria-hidden=\"true\"\n                className={`\n                    pointer-events-none inline-block h-4 w-4 transform rounded-full bg-white shadow-lg ring-0 \n                    transition duration-200 ease-in-out\n                    ${checked ? 'translate-x-4' : 'translate-x-0'}\n                `}\n            />\n        </button>\n    );\n};\n\nexport default Switch;\n"],"names":[],"mappings":";;;;;;AASA,MAAM,SAAgC,CAAC,EACnC,OAAO,EACP,QAAQ,EACR,WAAW,KAAK,EAChB,YAAY,EAAE,EACjB;IACG,qBACI,8OAAC;QACG,MAAK;QACL,MAAK;QACL,gBAAc;QACd,UAAU;QACV,SAAS,IAAM,CAAC,YAAY,SAAS,CAAC;QACtC,WAAW,CAAC;;;;gBAIR,EAAE,UAAU,mBAAmB,eAAe;gBAC9C,EAAE,WAAW,kCAAkC,GAAG;gBAClD,EAAE,UAAU;YAChB,CAAC;;0BAED,8OAAC;gBAAK,WAAU;0BAAU;;;;;;0BAC1B,8OAAC;gBACG,eAAY;gBACZ,WAAW,CAAC;;;oBAGR,EAAE,UAAU,kBAAkB,gBAAgB;gBAClD,CAAC;;;;;;;;;;;;AAIjB;uCAEe"}},
    {"offset": {"line": 2265, "column": 0}, "map": {"version":3,"sources":["file:///home/danudenny/Downloads/geogreen-mapper/src/components/LayerItem.tsx"],"sourcesContent":["import { CheckCircle2, Circle, Download } from 'lucide-react';\nimport React from 'react';\nimport { LayerConfig } from '../types';\nimport Switch from './ui/Switch';\n\ninterface LayerItemProps {\n    layer: LayerConfig;\n    groupId: string;\n    isBaseMap: boolean;\n    toggleLayer: (groupId: string, layerId: string) => void;\n    updateOpacity: (groupId: string, layerId: string, opacity: number) => void;\n}\n\nconst LayerItem: React.FC<LayerItemProps> = ({\n    layer,\n    groupId,\n    isBaseMap,\n    toggleLayer,\n    updateOpacity,\n}) => {\n    return (\n        <div className=\"space-y-2 animate-in fade-in duration-300\">\n            <div className=\"flex items-center justify-between group/layer\">\n                <div className=\"flex items-center gap-3\">\n                    {/* Visibility Control */}\n                    {isBaseMap ? (\n                        <button\n                            onClick={() => toggleLayer(groupId, layer.id)}\n                            className={`transition-colors focus:outline-none ${\n                                layer.visible\n                                    ? 'text-primary-400 hover:text-primary-300'\n                                    : 'text-slate-600 hover:text-slate-500'\n                            }`}\n                            title=\"Select Base Map\"\n                        >\n                            {layer.visible ? (\n                                <CheckCircle2 size={20} />\n                            ) : (\n                                <Circle size={20} />\n                            )}\n                        </button>\n                    ) : (\n                        <Switch\n                            checked={layer.visible}\n                            onChange={() => toggleLayer(groupId, layer.id)}\n                        />\n                    )}\n\n                    <span\n                        className={`text-sm cursor-pointer select-none transition-colors ${\n                            layer.visible\n                                ? 'text-slate-200 font-medium'\n                                : 'text-slate-500'\n                        }`}\n                        onClick={() => toggleLayer(groupId, layer.id)}\n                    >\n                        {layer.name}\n                    </span>\n                </div>\n\n                <div className=\"flex items-center gap-2\">\n                    {/* Color Indicator */}\n                    {layer.type === 'vector' && layer.color && (\n                        <div\n                            className=\"w-2.5 h-2.5 rounded-full ring-1 ring-slate-700/50\"\n                            style={{ backgroundColor: layer.color }}\n                        />\n                    )}\n\n                    {/* Download Button */}\n                    {layer.apiKey && (\n                        <a\n                            href={`/api/export/${layer.apiKey}`}\n                            download\n                            className=\"opacity-0 group-hover/layer:opacity-100 p-1 text-slate-500 hover:text-primary-400 hover:bg-slate-700 rounded transition-all\"\n                            title=\"Download GeoJSON\"\n                        >\n                            <Download size={14} />\n                        </a>\n                    )}\n                </div>\n            </div>\n\n            {/* Opacity Slider */}\n            {layer.visible && (\n                <div className=\"flex items-center gap-3 pl-12 pr-1 animate-in slide-in-from-top-1 duration-200\">\n                    <input\n                        type=\"range\"\n                        min=\"0\"\n                        max=\"1\"\n                        step=\"0.1\"\n                        value={layer.opacity}\n                        onChange={(e) =>\n                            updateOpacity(\n                                groupId,\n                                layer.id,\n                                parseFloat(e.target.value)\n                            )\n                        }\n                        className=\"flex-1 h-1.5 bg-slate-700 rounded-lg appearance-none cursor-pointer accent-primary-500 hover:accent-primary-400 focus:outline-none focus:ring-1 focus:ring-primary-500/50\"\n                        title={`Opacity: ${Math.round(layer.opacity * 100)}%`}\n                    />\n                    <span className=\"text-[10px] text-slate-400 w-6 text-right font-mono\">\n                        {Math.round(layer.opacity * 100)}%\n                    </span>\n                </div>\n            )}\n        </div>\n    );\n};\n\nexport default LayerItem;\n"],"names":[],"mappings":";;;;;AAAA;AAAA;AAAA;AAGA;;;;AAUA,MAAM,YAAsC,CAAC,EACzC,KAAK,EACL,OAAO,EACP,SAAS,EACT,WAAW,EACX,aAAa,EAChB;IACG,qBACI,8OAAC;QAAI,WAAU;;0BACX,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;wBAAI,WAAU;;4BAEV,0BACG,8OAAC;gCACG,SAAS,IAAM,YAAY,SAAS,MAAM,EAAE;gCAC5C,WAAW,CAAC,qCAAqC,EAC7C,MAAM,OAAO,GACP,4CACA,uCACR;gCACF,OAAM;0CAEL,MAAM,OAAO,iBACV,8OAAC,qOAAY;oCAAC,MAAM;;;;;6FAEpB,8OAAC,gNAAM;oCAAC,MAAM;;;;;;;;;;yFAItB,8OAAC,6IAAM;gCACH,SAAS,MAAM,OAAO;gCACtB,UAAU,IAAM,YAAY,SAAS,MAAM,EAAE;;;;;;0CAIrD,8OAAC;gCACG,WAAW,CAAC,qDAAqD,EAC7D,MAAM,OAAO,GACP,+BACA,kBACR;gCACF,SAAS,IAAM,YAAY,SAAS,MAAM,EAAE;0CAE3C,MAAM,IAAI;;;;;;;;;;;;kCAInB,8OAAC;wBAAI,WAAU;;4BAEV,MAAM,IAAI,KAAK,YAAY,MAAM,KAAK,kBACnC,8OAAC;gCACG,WAAU;gCACV,OAAO;oCAAE,iBAAiB,MAAM,KAAK;gCAAC;;;;;;4BAK7C,MAAM,MAAM,kBACT,8OAAC;gCACG,MAAM,CAAC,YAAY,EAAE,MAAM,MAAM,EAAE;gCACnC,QAAQ;gCACR,WAAU;gCACV,OAAM;0CAEN,cAAA,8OAAC,sNAAQ;oCAAC,MAAM;;;;;;;;;;;;;;;;;;;;;;;YAO/B,MAAM,OAAO,kBACV,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;wBACG,MAAK;wBACL,KAAI;wBACJ,KAAI;wBACJ,MAAK;wBACL,OAAO,MAAM,OAAO;wBACpB,UAAU,CAAC,IACP,cACI,SACA,MAAM,EAAE,EACR,WAAW,EAAE,MAAM,CAAC,KAAK;wBAGjC,WAAU;wBACV,OAAO,CAAC,SAAS,EAAE,KAAK,KAAK,CAAC,MAAM,OAAO,GAAG,KAAK,CAAC,CAAC;;;;;;kCAEzD,8OAAC;wBAAK,WAAU;;4BACX,KAAK,KAAK,CAAC,MAAM,OAAO,GAAG;4BAAK;;;;;;;;;;;;;;;;;;;AAMzD;uCAEe"}},
    {"offset": {"line": 2419, "column": 0}, "map": {"version":3,"sources":["file:///home/danudenny/Downloads/geogreen-mapper/src/components/LayerGroupItem.tsx"],"sourcesContent":["import { ChevronDown, ChevronRight, Folder } from 'lucide-react';\nimport React from 'react';\nimport { LayerGroup } from '../types';\nimport LayerItem from './LayerItem';\n\ninterface LayerGroupItemProps {\n    group: LayerGroup;\n    isExpanded: boolean;\n    toggleGroup: (id: string) => void;\n    toggleLayer: (groupId: string, layerId: string) => void;\n    updateOpacity: (groupId: string, layerId: string, opacity: number) => void;\n}\n\nconst LayerGroupItem: React.FC<LayerGroupItemProps> = ({\n    group,\n    isExpanded,\n    toggleGroup,\n    toggleLayer,\n    updateOpacity,\n}) => {\n    const isBaseMap = group.id === 'group-basemap';\n\n    return (\n        <div\n            className={`border transition-all duration-200 rounded-lg overflow-hidden ${\n                isExpanded\n                    ? 'border-slate-600 bg-slate-800/40'\n                    : 'border-slate-800 bg-slate-900/40'\n            }`}\n        >\n            {/* Group Header */}\n            <button\n                onClick={() => toggleGroup(group.id)}\n                className=\"w-full flex items-center justify-between p-3 bg-slate-800/80 hover:bg-slate-750 transition-colors cursor-pointer group\"\n            >\n                <div className=\"flex items-center gap-2\">\n                    <Folder\n                        size={16}\n                        className={`${\n                            isBaseMap\n                                ? 'text-slate-500'\n                                : 'text-primary-400 group-hover:text-primary-300'\n                        }`}\n                    />\n                    <span className=\"font-semibold text-sm text-slate-200 group-hover:text-white\">\n                        {group.name}\n                    </span>\n                </div>\n                {isExpanded ? (\n                    <ChevronDown size={16} className=\"text-slate-400\" />\n                ) : (\n                    <ChevronRight size={16} className=\"text-slate-500\" />\n                )}\n            </button>\n\n            {/* Layer List */}\n            {isExpanded && (\n                <div className=\"p-3 space-y-3 border-t border-slate-700/50\">\n                    {group.layers.map((layer) => (\n                        <LayerItem\n                            key={layer.id}\n                            layer={layer}\n                            groupId={group.id}\n                            isBaseMap={isBaseMap}\n                            toggleLayer={toggleLayer}\n                            updateOpacity={updateOpacity}\n                        />\n                    ))}\n                </div>\n            )}\n        </div>\n    );\n};\n\nexport default LayerGroupItem;\n"],"names":[],"mappings":";;;;;AAAA;AAAA;AAAA;AAGA;;;;AAUA,MAAM,iBAAgD,CAAC,EACnD,KAAK,EACL,UAAU,EACV,WAAW,EACX,WAAW,EACX,aAAa,EAChB;IACG,MAAM,YAAY,MAAM,EAAE,KAAK;IAE/B,qBACI,8OAAC;QACG,WAAW,CAAC,8DAA8D,EACtE,aACM,qCACA,oCACR;;0BAGF,8OAAC;gBACG,SAAS,IAAM,YAAY,MAAM,EAAE;gBACnC,WAAU;;kCAEV,8OAAC;wBAAI,WAAU;;0CACX,8OAAC,gNAAM;gCACH,MAAM;gCACN,WAAW,GACP,YACM,mBACA,iDACR;;;;;;0CAEN,8OAAC;gCAAK,WAAU;0CACX,MAAM,IAAI;;;;;;;;;;;;oBAGlB,2BACG,8OAAC,mOAAW;wBAAC,MAAM;wBAAI,WAAU;;;;;iFAEjC,8OAAC,sOAAY;wBAAC,MAAM;wBAAI,WAAU;;;;;;;;;;;;YAKzC,4BACG,8OAAC;gBAAI,WAAU;0BACV,MAAM,MAAM,CAAC,GAAG,CAAC,CAAC,sBACf,8OAAC,0IAAS;wBAEN,OAAO;wBACP,SAAS,MAAM,EAAE;wBACjB,WAAW;wBACX,aAAa;wBACb,eAAe;uBALV,MAAM,EAAE;;;;;;;;;;;;;;;;AAYzC;uCAEe"}},
    {"offset": {"line": 2516, "column": 0}, "map": {"version":3,"sources":["file:///home/danudenny/Downloads/geogreen-mapper/src/components/LayerPanel.tsx"],"sourcesContent":["import { Layers } from 'lucide-react';\nimport React, { useState } from 'react';\nimport { LayerGroup } from '../types';\nimport LayerGroupItem from './LayerGroupItem';\n\ninterface LayerPanelProps {\n    groups: LayerGroup[];\n    toggleLayer: (groupId: string, layerId: string) => void;\n    updateOpacity: (groupId: string, layerId: string, opacity: number) => void;\n}\n\nconst LayerPanel: React.FC<LayerPanelProps> = ({\n    groups,\n    toggleLayer,\n    updateOpacity,\n}) => {\n    // STATE INITIALIZATION YANG DINAMIS\n    // Logic: Jika ID group adalah 'group-basemap', set false (tertutup).\n    // Selain itu set true (terbuka).\n    const [expandedGroups, setExpandedGroups] = useState<\n        Record<string, boolean>\n    >(() => {\n        const initialState: Record<string, boolean> = {};\n        groups.forEach((group) => {\n            initialState[group.id] = group.id !== 'group-basemap';\n        });\n        return initialState;\n    });\n\n    const toggleGroup = (id: string) => {\n        setExpandedGroups((prev) => ({ ...prev, [id]: !prev[id] }));\n    };\n\n    return (\n        <div className=\"h-full w-80 bg-slate-900/95 backdrop-blur-md border-r border-slate-700 flex flex-col shadow-2xl animate-in slide-in-from-left duration-300 z-50\">\n            {/* Header Panel */}\n            <div className=\"p-5 border-b border-slate-700 bg-slate-900 shadow-sm\">\n                <h2 className=\"text-lg font-bold text-primary-400 tracking-tight flex items-center gap-2\">\n                    <Layers size={20} className=\"text-primary-500\" />\n                    DATA LAYERS\n                </h2>\n                <p className=\"text-xs text-slate-500 mt-1\">\n                    Manage spatial data visibility\n                </p>\n            </div>\n\n            {/* Scrollable List */}\n            <div className=\"flex-1 overflow-y-auto p-4 space-y-4 scrollbar-thin scrollbar-thumb-slate-700 scrollbar-track-transparent\">\n                {groups.map((group) => (\n                    <LayerGroupItem\n                        key={group.id}\n                        group={group}\n                        isExpanded={!!expandedGroups[group.id]}\n                        toggleGroup={toggleGroup}\n                        toggleLayer={toggleLayer}\n                        updateOpacity={updateOpacity}\n                    />\n                ))}\n            </div>\n        </div>\n    );\n};\n\nexport default LayerPanel;\n"],"names":[],"mappings":";;;;;AAAA;AACA;AAEA;;;;;AAQA,MAAM,aAAwC,CAAC,EAC3C,MAAM,EACN,WAAW,EACX,aAAa,EAChB;IACG,oCAAoC;IACpC,qEAAqE;IACrE,iCAAiC;IACjC,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,iNAAQ,EAElD;QACE,MAAM,eAAwC,CAAC;QAC/C,OAAO,OAAO,CAAC,CAAC;YACZ,YAAY,CAAC,MAAM,EAAE,CAAC,GAAG,MAAM,EAAE,KAAK;QAC1C;QACA,OAAO;IACX;IAEA,MAAM,cAAc,CAAC;QACjB,kBAAkB,CAAC,OAAS,CAAC;gBAAE,GAAG,IAAI;gBAAE,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,GAAG;YAAC,CAAC;IAC7D;IAEA,qBACI,8OAAC;QAAI,WAAU;;0BAEX,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;wBAAG,WAAU;;0CACV,8OAAC,gNAAM;gCAAC,MAAM;gCAAI,WAAU;;;;;;4BAAqB;;;;;;;kCAGrD,8OAAC;wBAAE,WAAU;kCAA8B;;;;;;;;;;;;0BAM/C,8OAAC;gBAAI,WAAU;0BACV,OAAO,GAAG,CAAC,CAAC,sBACT,8OAAC,+IAAc;wBAEX,OAAO;wBACP,YAAY,CAAC,CAAC,cAAc,CAAC,MAAM,EAAE,CAAC;wBACtC,aAAa;wBACb,aAAa;wBACb,eAAe;uBALV,MAAM,EAAE;;;;;;;;;;;;;;;;AAWrC;uCAEe"}},
    {"offset": {"line": 2613, "column": 0}, "map": {"version":3,"sources":["file:///home/danudenny/Downloads/geogreen-mapper/src/components/Sidebar.tsx"],"sourcesContent":["import {\n    BringToFront,\n    Database,\n    Grid2x2Plus,\n    Info,\n    PieChart,\n    Settings,\n} from 'lucide-react';\nimport { SidebarMode } from '../types';\n\ninterface SidebarProps {\n    activeMode: SidebarMode;\n    setActiveMode: (mode: SidebarMode) => void;\n}\n\nconst Sidebar: React.FC<SidebarProps> = ({ activeMode, setActiveMode }) => {\n    const toggleMode = (mode: SidebarMode) => {\n        setActiveMode(activeMode === mode ? 'none' : mode);\n    };\n\n    const NavItem = ({\n        mode,\n        icon: Icon,\n        tooltip,\n    }: {\n        mode: SidebarMode;\n        icon: React.ElementType;\n        tooltip: string;\n    }) => (\n        <button\n            onClick={() => toggleMode(mode)}\n            className={`\n        relative group flex items-center justify-center w-16 h-16 transition-all duration-200\n        ${\n            activeMode === mode\n                ? 'bg-slate-800 text-primary-400 border-l-4 border-primary-500'\n                : 'text-slate-400 hover:text-white hover:bg-slate-800'\n        }\n      `}\n        >\n            <Icon size={24} strokeWidth={1.5} />\n            {/* Tooltip */}\n            <div className=\"absolute left-16 ml-2 px-2 py-1 bg-slate-900 text-primary-200 text-xs rounded opacity-0 group-hover:opacity-100 pointer-events-none transition-opacity border border-slate-700 whitespace-nowrap z-50 shadow-lg font-sans\">\n                {tooltip}\n            </div>\n        </button>\n    );\n\n    return (\n        <div className=\"w-16 h-full bg-slate-900 border-r border-slate-800 flex flex-col items-center z-20 shadow-xl relative\">\n            <div className=\"p-4 mb-4 text-primary-500\">\n                <Database size={28} />\n            </div>\n\n            <nav className=\"flex-1 flex flex-col w-full gap-2\">\n                <NavItem\n                    mode=\"layers\"\n                    icon={BringToFront}\n                    tooltip=\"Layer Manager\"\n                />\n                <NavItem\n                    mode=\"upload\"\n                    icon={Grid2x2Plus}\n                    tooltip=\"Import Data\"\n                />\n                <NavItem\n                    mode=\"settings\"\n                    icon={Settings}\n                    tooltip=\"Map Settings\"\n                />\n                <NavItem\n                    mode=\"analysis\"\n                    icon={PieChart}\n                    tooltip=\"Spatial Analysis\"\n                />\n            </nav>\n\n            <div className=\"mb-4\">\n                <button className=\"w-12 h-12 flex items-center justify-center rounded-full bg-slate-800 text-slate-500 hover:text-primary-400 transition-colors\">\n                    <Info size={20} />\n                </button>\n            </div>\n        </div>\n    );\n};\n\nexport default Sidebar;\n"],"names":[],"mappings":";;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;AAeA,MAAM,UAAkC,CAAC,EAAE,UAAU,EAAE,aAAa,EAAE;IAClE,MAAM,aAAa,CAAC;QAChB,cAAc,eAAe,OAAO,SAAS;IACjD;IAEA,MAAM,UAAU,CAAC,EACb,IAAI,EACJ,MAAM,IAAI,EACV,OAAO,EAKV,iBACG,8OAAC;YACG,SAAS,IAAM,WAAW;YAC1B,WAAW,CAAC;;QAEhB,EACI,eAAe,OACT,gEACA,qDACT;MACH,CAAC;;8BAEK,8OAAC;oBAAK,MAAM;oBAAI,aAAa;;;;;;8BAE7B,8OAAC;oBAAI,WAAU;8BACV;;;;;;;;;;;;IAKb,qBACI,8OAAC;QAAI,WAAU;;0BACX,8OAAC;gBAAI,WAAU;0BACX,cAAA,8OAAC,sNAAQ;oBAAC,MAAM;;;;;;;;;;;0BAGpB,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;wBACG,MAAK;wBACL,MAAM,0OAAY;wBAClB,SAAQ;;;;;;kCAEZ,8OAAC;wBACG,MAAK;wBACL,MAAM,uOAAW;wBACjB,SAAQ;;;;;;kCAEZ,8OAAC;wBACG,MAAK;wBACL,MAAM,sNAAQ;wBACd,SAAQ;;;;;;kCAEZ,8OAAC;wBACG,MAAK;wBACL,MAAM,0NAAQ;wBACd,SAAQ;;;;;;;;;;;;0BAIhB,8OAAC;gBAAI,WAAU;0BACX,cAAA,8OAAC;oBAAO,WAAU;8BACd,cAAA,8OAAC,0MAAI;wBAAC,MAAM;;;;;;;;;;;;;;;;;;;;;;AAKhC;uCAEe"}},
    {"offset": {"line": 2754, "column": 0}, "map": {"version":3,"sources":["file:///home/danudenny/Downloads/geogreen-mapper/src/components/UploadPanel.tsx"],"sourcesContent":["import {\n    AlertCircle,\n    BarChart3,\n    CheckCircle,\n    File as FileIcon,\n    FileType,\n    Trash2,\n    UploadCloud,\n    X,\n} from 'lucide-react';\nimport { useCallback, useState } from 'react';\n\ninterface UploadPanelProps {\n    onUpload: (files: File[]) => void;\n    uploadedFiles?: File[];\n    onRemove?: (file: File) => void;\n    onAnalyze?: (file: File) => void;\n    close: () => void;\n}\n\nconst UploadPanel: React.FC<UploadPanelProps> = ({\n    onUpload,\n    uploadedFiles = [],\n    onRemove,\n    onAnalyze,\n    close,\n}) => {\n    const [isDragging, setIsDragging] = useState(false);\n    const [feedback, setFeedback] = useState<{\n        type: 'success' | 'error';\n        message: string;\n    } | null>(null);\n\n    const handleDragOver = useCallback((e: React.DragEvent) => {\n        e.preventDefault();\n        setIsDragging(true);\n    }, []);\n\n    const handleDragLeave = useCallback((e: React.DragEvent) => {\n        e.preventDefault();\n        setIsDragging(false);\n    }, []);\n\n    const handleDrop = useCallback(\n        (e: React.DragEvent) => {\n            e.preventDefault();\n            setIsDragging(false);\n\n            if (e.dataTransfer.files && e.dataTransfer.files.length > 0) {\n                processFiles(e.dataTransfer.files);\n            }\n        },\n        [onUpload]\n    );\n\n    const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n        if (e.target.files && e.target.files.length > 0) {\n            processFiles(e.target.files);\n        }\n    };\n\n    const processFiles = (fileList: FileList) => {\n        const files = Array.from(fileList);\n        setFeedback({\n            type: 'success',\n            message: `Processing ${files.length} file(s)...`,\n        });\n        setTimeout(() => {\n            onUpload(files);\n            setFeedback(null);\n        }, 1000);\n    };\n\n    const formatFileSize = (bytes: number) => {\n        if (bytes === 0) return '0 Bytes';\n        const k = 1024;\n        const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n        const i = Math.floor(Math.log(bytes) / Math.log(k));\n        return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n    };\n\n    return (\n        <div className=\"h-full w-80 bg-slate-900/95 backdrop-blur-sm border-r border-slate-700 flex flex-col p-6 animate-in slide-in-from-left duration-300 relative\">\n            <button\n                onClick={close}\n                className=\"absolute top-4 right-4 text-slate-500 hover:text-white transition-colors\"\n                title=\"Close\"\n            >\n                <X size={20} />\n            </button>\n\n            <div className=\"mb-6\">\n                <h2 className=\"text-lg font-bold text-primary-400 flex items-center gap-2\">\n                    <UploadCloud size={20} />\n                    IMPORT DATA\n                </h2>\n                <p className=\"text-xs text-slate-400 mt-2\">\n                    Supported: .geojson, .kml, .json\n                </p>\n            </div>\n\n            {/* Upload Area */}\n            <div\n                onDragOver={handleDragOver}\n                onDragLeave={handleDragLeave}\n                onDrop={handleDrop}\n                className={`\n          border-2 border-dashed rounded-xl p-6 flex flex-col items-center justify-center text-center transition-all cursor-pointer mb-6\n          ${\n              isDragging\n                  ? 'border-primary-500 bg-primary-900/20'\n                  : 'border-slate-600 bg-slate-800/30 hover:border-slate-400 hover:bg-slate-800/50'\n          }\n        `}\n            >\n                <input\n                    type=\"file\"\n                    multiple\n                    className=\"hidden\"\n                    id=\"file-upload\"\n                    accept=\".geojson,.json,.kml\"\n                    onChange={handleInputChange}\n                />\n                <label\n                    htmlFor=\"file-upload\"\n                    className=\"cursor-pointer flex flex-col items-center w-full h-full\"\n                >\n                    <div className=\"w-10 h-10 rounded-full bg-slate-700 flex items-center justify-center mb-3 text-primary-400 group-hover:bg-slate-600 transition-colors\">\n                        <FileType size={20} />\n                    </div>\n                    <p className=\"text-sm font-medium text-slate-300\">\n                        Click or Drag Files\n                    </p>\n                    <p className=\"text-[10px] text-slate-500 mt-1 uppercase tracking-wider\">\n                        Max 50MB\n                    </p>\n                </label>\n            </div>\n\n            {/* Feedback Message */}\n            {feedback && (\n                <div\n                    className={`mb-6 p-3 rounded-lg flex items-center gap-3 animate-in fade-in slide-in-from-top-2 ${\n                        feedback.type === 'success'\n                            ? 'bg-emerald-900/30 border border-emerald-800 text-emerald-400'\n                            : 'bg-red-900/30 border border-red-800 text-red-400'\n                    }`}\n                >\n                    {feedback.type === 'success' ? (\n                        <CheckCircle size={16} />\n                    ) : (\n                        <AlertCircle size={16} />\n                    )}\n                    <span className=\"text-xs font-medium\">\n                        {feedback.message}\n                    </span>\n                </div>\n            )}\n\n            {/* Uploaded Files List */}\n            {uploadedFiles.length > 0 && (\n                <div className=\"flex-1 flex flex-col overflow-hidden\">\n                    <h3 className=\"text-xs font-bold text-slate-500 uppercase tracking-wider mb-3 flex items-center justify-between\">\n                        <span>Uploaded Files</span>\n                        <span className=\"bg-slate-800 px-2 py-0.5 rounded-full text-[10px]\">\n                            {uploadedFiles.length}\n                        </span>\n                    </h3>\n                    <div className=\"flex-1 overflow-y-auto space-y-2 pr-1 scrollbar-thin scrollbar-thumb-slate-700 scrollbar-track-transparent\">\n                        {uploadedFiles.map((file, index) => (\n                            <div\n                                key={`${file.name}-${index}`}\n                                className=\"group flex items-center justify-between p-3 rounded-lg bg-slate-800/40 border border-slate-800 hover:border-slate-600 transition-all hover:bg-slate-800/60\"\n                            >\n                                <div className=\"flex items-center gap-3 overflow-hidden\">\n                                    <div className=\"w-8 h-8 rounded bg-slate-700/50 flex items-center justify-center text-slate-400 group-hover:text-primary-400 transition-colors flex-shrink-0\">\n                                        <FileIcon size={16} />\n                                    </div>\n                                    <div className=\"flex flex-col overflow-hidden\">\n                                        <span\n                                            className=\"text-xs font-medium text-slate-200 truncate\"\n                                            title={file.name}\n                                        >\n                                            {file.name}\n                                        </span>\n                                        <span className=\"text-[10px] text-slate-500\">\n                                            {formatFileSize(file.size)}\n                                        </span>\n                                    </div>\n                                </div>\n                                <div className=\"flex items-center gap-1\">\n                                    {onRemove && (\n                                        <button\n                                            onClick={() => onRemove(file)}\n                                            className=\"p-1.5 text-slate-500 hover:text-red-400 hover:bg-red-950/30 rounded-md transition-colors opacity-0 group-hover:opacity-100 focus:opacity-100\"\n                                            title=\"Remove file\"\n                                        >\n                                            <Trash2 size={14} />\n                                        </button>\n                                    )}\n                                    {onAnalyze && (\n                                        <button\n                                            onClick={() => onAnalyze(file)}\n                                            className=\"p-1.5 text-slate-500 hover:text-primary-400 hover:bg-primary-950/30 rounded-md transition-colors opacity-0 group-hover:opacity-100 focus:opacity-100\"\n                                            title=\"Analyze File\"\n                                        >\n                                            <BarChart3 size={14} />\n                                        </button>\n                                    )}\n                                </div>\n                            </div>\n                        ))}\n                    </div>\n                </div>\n            )}\n        </div>\n    );\n};\n\nexport default UploadPanel;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3120, "column": 0}, "map": {"version":3,"sources":["file:///home/danudenny/Downloads/geogreen-mapper/src/hooks/useAnalysis.ts"],"sourcesContent":["import { useCallback, useState } from 'react';\n\nexport interface AnalysisResult {\n    category: string;\n    areaHa: number;\n    percentage: number;\n    color?: string;\n    unit?: string;\n    [key: string]: any;\n}\n\nexport const useAnalysis = () => {\n    const [isAnalyzing, setIsAnalyzing] = useState(false);\n    const [results, setResults] = useState<AnalysisResult[] | null>(null);\n    const [error, setError] = useState<string | null>(null);\n\n    const runAnalysis = useCallback(\n        async (file: File, layerId: string = 'rtrw') => {\n            setIsAnalyzing(true);\n            setError(null);\n            setResults(null);\n\n            try {\n                const text = await file.text();\n                const geojson = JSON.parse(text);\n\n                // Extract the first geometry from Feature or Geometry object\n                let geometry = null;\n                if (geojson.type === 'FeatureCollection') {\n                    if (geojson.features.length > 0) {\n                        geometry = geojson.features[0].geometry;\n                    }\n                } else if (geojson.type === 'Feature') {\n                    geometry = geojson.geometry;\n                } else if (\n                    geojson.type === 'Polygon' ||\n                    geojson.type === 'MultiPolygon'\n                ) {\n                    geometry = geojson;\n                }\n\n                if (!geometry) {\n                    throw new Error('No valid geometry found in file');\n                }\n\n                const res = await fetch('/api/analyze', {\n                    method: 'POST',\n                    headers: { 'Content-Type': 'application/json' },\n                    body: JSON.stringify({ geometry, layer: layerId }),\n                });\n\n                if (!res.ok) {\n                    const errText = await res.text();\n                    throw new Error(errText || 'Analysis failed');\n                }\n\n                const data = await res.json();\n                setResults(data);\n            } catch (err) {\n                console.error('Analysis failed:', err);\n                setError(err instanceof Error ? err.message : String(err));\n            } finally {\n                setIsAnalyzing(false);\n            }\n        },\n        []\n    );\n\n    const clearAnalysis = useCallback(() => {\n        setResults(null);\n        setError(null);\n        setIsAnalyzing(false);\n    }, []);\n\n    return { runAnalysis, clearAnalysis, isAnalyzing, results, error };\n};\n"],"names":[],"mappings":";;;;AAAA;;AAWO,MAAM,cAAc;IACvB,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAC;IAC/C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAA0B;IAChE,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAgB;IAElD,MAAM,cAAc,IAAA,oNAAW,EAC3B,OAAO,MAAY,UAAkB,MAAM;QACvC,eAAe;QACf,SAAS;QACT,WAAW;QAEX,IAAI;YACA,MAAM,OAAO,MAAM,KAAK,IAAI;YAC5B,MAAM,UAAU,KAAK,KAAK,CAAC;YAE3B,6DAA6D;YAC7D,IAAI,WAAW;YACf,IAAI,QAAQ,IAAI,KAAK,qBAAqB;gBACtC,IAAI,QAAQ,QAAQ,CAAC,MAAM,GAAG,GAAG;oBAC7B,WAAW,QAAQ,QAAQ,CAAC,EAAE,CAAC,QAAQ;gBAC3C;YACJ,OAAO,IAAI,QAAQ,IAAI,KAAK,WAAW;gBACnC,WAAW,QAAQ,QAAQ;YAC/B,OAAO,IACH,QAAQ,IAAI,KAAK,aACjB,QAAQ,IAAI,KAAK,gBACnB;gBACE,WAAW;YACf;YAEA,IAAI,CAAC,UAAU;gBACX,MAAM,IAAI,MAAM;YACpB;YAEA,MAAM,MAAM,MAAM,MAAM,gBAAgB;gBACpC,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBAAE;oBAAU,OAAO;gBAAQ;YACpD;YAEA,IAAI,CAAC,IAAI,EAAE,EAAE;gBACT,MAAM,UAAU,MAAM,IAAI,IAAI;gBAC9B,MAAM,IAAI,MAAM,WAAW;YAC/B;YAEA,MAAM,OAAO,MAAM,IAAI,IAAI;YAC3B,WAAW;QACf,EAAE,OAAO,KAAK;YACV,QAAQ,KAAK,CAAC,oBAAoB;YAClC,SAAS,eAAe,QAAQ,IAAI,OAAO,GAAG,OAAO;QACzD,SAAU;YACN,eAAe;QACnB;IACJ,GACA,EAAE;IAGN,MAAM,gBAAgB,IAAA,oNAAW,EAAC;QAC9B,WAAW;QACX,SAAS;QACT,eAAe;IACnB,GAAG,EAAE;IAEL,OAAO;QAAE;QAAa;QAAe;QAAa;QAAS;IAAM;AACrE"}},
    {"offset": {"line": 3197, "column": 0}, "map": {"version":3,"sources":["file:///home/danudenny/Downloads/geogreen-mapper/src/app/page.tsx"],"sourcesContent":["'use client';\n\nimport AnalysisPanel from '@/components/AnalysisPanel';\nimport FeaturePopup from '@/components/FeaturePopup';\nimport LayerPanel from '@/components/LayerPanel';\nimport Sidebar from '@/components/Sidebar';\nimport UploadPanel from '@/components/UploadPanel';\nimport { INITIAL_LAYER_GROUPS } from '@/constants';\nimport { useAnalysis } from '@/hooks/useAnalysis';\nimport { LayerGroup, SelectedFeature, SidebarMode } from '@/types';\nimport dynamic from 'next/dynamic';\nimport { useEffect, useState } from 'react';\n\n// Dynamically import MapViewer to disable SSR, as OpenLayers depends on browser APIs\nconst MapViewer = dynamic(() => import('@/components/MapViewer'), {\n    ssr: false,\n    loading: () => (\n        <div className=\"w-full h-full bg-slate-900 flex items-center justify-center text-slate-500\">\n            Loading Map...\n        </div>\n    ),\n});\n\nconst Home: React.FC = () => {\n    const [activeSidebarMode, setActiveSidebarMode] =\n        useState<SidebarMode>('none');\n    const [layerGroups, setLayerGroups] =\n        useState<LayerGroup[]>(INITIAL_LAYER_GROUPS);\n    const [selectedFeature, setSelectedFeature] =\n        useState<SelectedFeature | null>(null);\n    const [uploadedFiles, setUploadedFiles] = useState<File[]>([]);\n\n    // Lifted Analysis State\n    const analysisState = useAnalysis();\n\n    // Need to ensure consistent hydration\n    const [mounted, setMounted] = useState(false);\n    useEffect(() => {\n        setMounted(true);\n    }, []);\n\n    // Layer State Handlers\n    const toggleLayer = (groupId: string, layerId: string) => {\n        setLayerGroups((prevGroups) =>\n            prevGroups.map((group) => {\n                if (group.id !== groupId) return group;\n\n                // Base Maps: Radio Button Logic (Mutually Exclusive)\n                if (group.id === 'group-basemap') {\n                    return {\n                        ...group,\n                        layers: group.layers.map((layer) => ({\n                            ...layer,\n                            visible: layer.id === layerId, // Activate clicked, deactivate others\n                        })),\n                    };\n                }\n\n                // Other Layers: Checkbox Logic (Toggle independent)\n                return {\n                    ...group,\n                    layers: group.layers.map((layer) =>\n                        layer.id === layerId\n                            ? { ...layer, visible: !layer.visible }\n                            : layer\n                    ),\n                };\n            })\n        );\n    };\n\n    const updateOpacity = (\n        groupId: string,\n        layerId: string,\n        opacity: number\n    ) => {\n        setLayerGroups((prevGroups) =>\n            prevGroups.map((group) => {\n                if (group.id !== groupId) return group;\n                return {\n                    ...group,\n                    layers: group.layers.map((layer) =>\n                        layer.id === layerId ? { ...layer, opacity } : layer\n                    ),\n                };\n            })\n        );\n    };\n\n    const handleFileUpload = async (files: File[]) => {\n        setUploadedFiles((prev) => {\n            // Filter out duplicate files by name\n            const newFiles = files.filter(\n                (newFile) => !prev.some((p) => p.name === newFile.name)\n            );\n            return [...prev, ...newFiles];\n        });\n        // We can keep the sidebar open to show the file list and allow further actions\n        // setActiveSidebarMode('none');\n\n        // OPTIONAL: Automatically open analysis panel if files are uploaded\n        // setActiveSidebarMode('analysis');\n    };\n\n    const handleRemoveFile = (fileToRemove: File) => {\n        setUploadedFiles((prev) =>\n            prev.filter((file) => file.name !== fileToRemove.name)\n        );\n        // Clear analysis if any file is removed (or ideally only if analyzed file is removed)\n        analysisState.clearAnalysis();\n    };\n\n    if (!mounted) return null;\n\n    return (\n        <div className=\"flex w-full h-screen bg-slate-950 text-slate-100 overflow-hidden font-sans\">\n            {/* 1. Left Minimized Rail */}\n            <Sidebar\n                activeMode={activeSidebarMode}\n                setActiveMode={setActiveSidebarMode}\n            />\n\n            {/* 2. Expandable Sidebar Panel (Layers, Settings, Upload) */}\n            <div\n                className={`\n        relative h-full transition-all duration-300 ease-in-out shadow-2xl z-20 flex\n        ${\n            activeSidebarMode !== 'none' && activeSidebarMode !== 'analysis'\n                ? 'w-80 opacity-100 border-r border-slate-800'\n                : 'w-0 opacity-0 overflow-hidden border-none'\n        }\n      `}\n            >\n                {activeSidebarMode === 'layers' && (\n                    <LayerPanel\n                        groups={layerGroups}\n                        toggleLayer={toggleLayer}\n                        updateOpacity={updateOpacity}\n                    />\n                )}\n                {activeSidebarMode === 'upload' && (\n                    <UploadPanel\n                        onUpload={handleFileUpload}\n                        uploadedFiles={uploadedFiles}\n                        onRemove={handleRemoveFile}\n                        onAnalyze={(file) => {\n                            // Logic to set active file for analysis can be added here if needed\n                            // For now, just open the panel, and it defaults to first file or let user choose\n                            setActiveSidebarMode('analysis');\n                        }}\n                        close={() => setActiveSidebarMode('none')}\n                    />\n                )}\n                {activeSidebarMode === 'settings' && (\n                    <div className=\"p-6 w-80 bg-slate-900 h-full\">\n                        <h2 className=\"text-lg font-bold text-primary-400 mb-4\">\n                            SETTINGS\n                        </h2>\n                        <div className=\"text-sm text-slate-400\">\n                            <p className=\"mb-2\">Unit System: Metric</p>\n                            <p className=\"mb-2\">Projection: EPSG:3857</p>\n                            <p>Theme: GeoGreen Dark</p>\n                        </div>\n                    </div>\n                )}\n            </div>\n\n            {/* 3. Main Map Area */}\n            <div className=\"flex-1 relative z-0\">\n                <MapViewer\n                    layerGroups={layerGroups}\n                    onFeatureSelect={(f: SelectedFeature | null) => {\n                        setSelectedFeature(f);\n                    }}\n                    filesToLoad={uploadedFiles}\n                />\n\n                {/* 4. Right Feature Popup */}\n                {selectedFeature && (\n                    <FeaturePopup\n                        feature={selectedFeature}\n                        onClose={() => setSelectedFeature(null)}\n                    />\n                )}\n\n                {/* 5. Right Analysis Panel (Overlay) */}\n                {activeSidebarMode === 'analysis' && (\n                    <AnalysisPanel\n                        uploadedFiles={uploadedFiles}\n                        analysisState={analysisState}\n                        close={() => setActiveSidebarMode('none')}\n                    />\n                )}\n            </div>\n        </div>\n    );\n};\n\nexport default Home;\n"],"names":[],"mappings":"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"}}]
}